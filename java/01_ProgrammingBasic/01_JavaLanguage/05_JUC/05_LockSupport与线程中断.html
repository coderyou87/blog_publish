<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LockSupport与线程中断 | 小游</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon1" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-02-18/d687f535b564447e82a3178a4e9b2f8c.jpg">
    <link rel="icon2" href="https://you-blog.oss-cn-shenzhen.aliyuncs.com/typora/2021-02-18/icon.jpg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="知行合一">
    <link rel="preload" href="/blog_publish/assets/css/0.styles.9a82886c.css" as="style"><link rel="preload" href="/blog_publish/assets/js/app.e29f9086.js" as="script"><link rel="preload" href="/blog_publish/assets/js/2.92f2819f.js" as="script"><link rel="preload" href="/blog_publish/assets/js/76.b8695919.js" as="script"><link rel="prefetch" href="/blog_publish/assets/js/10.47fa77fc.js"><link rel="prefetch" href="/blog_publish/assets/js/100.b8e3380f.js"><link rel="prefetch" href="/blog_publish/assets/js/101.427628de.js"><link rel="prefetch" href="/blog_publish/assets/js/102.1dfc5b6f.js"><link rel="prefetch" href="/blog_publish/assets/js/103.70b33e89.js"><link rel="prefetch" href="/blog_publish/assets/js/104.7a900765.js"><link rel="prefetch" href="/blog_publish/assets/js/105.7d4ec89c.js"><link rel="prefetch" href="/blog_publish/assets/js/106.6b858138.js"><link rel="prefetch" href="/blog_publish/assets/js/107.18149322.js"><link rel="prefetch" href="/blog_publish/assets/js/108.7a40e3ab.js"><link rel="prefetch" href="/blog_publish/assets/js/109.f7041229.js"><link rel="prefetch" href="/blog_publish/assets/js/11.e98fd180.js"><link rel="prefetch" href="/blog_publish/assets/js/110.0c34c439.js"><link rel="prefetch" href="/blog_publish/assets/js/111.992e90ff.js"><link rel="prefetch" href="/blog_publish/assets/js/112.fe86cf75.js"><link rel="prefetch" href="/blog_publish/assets/js/113.a08619b9.js"><link rel="prefetch" href="/blog_publish/assets/js/114.9d784811.js"><link rel="prefetch" href="/blog_publish/assets/js/115.03648353.js"><link rel="prefetch" href="/blog_publish/assets/js/116.0a394ffc.js"><link rel="prefetch" href="/blog_publish/assets/js/117.7baf14f1.js"><link rel="prefetch" href="/blog_publish/assets/js/118.3fe4d727.js"><link rel="prefetch" href="/blog_publish/assets/js/119.e3764bc0.js"><link rel="prefetch" href="/blog_publish/assets/js/12.11b47e36.js"><link rel="prefetch" href="/blog_publish/assets/js/120.c0df58cd.js"><link rel="prefetch" href="/blog_publish/assets/js/121.e424c37c.js"><link rel="prefetch" href="/blog_publish/assets/js/122.3d9e4658.js"><link rel="prefetch" href="/blog_publish/assets/js/123.2ad9b160.js"><link rel="prefetch" href="/blog_publish/assets/js/124.3054efd3.js"><link rel="prefetch" href="/blog_publish/assets/js/125.daa123e6.js"><link rel="prefetch" href="/blog_publish/assets/js/126.7fc45740.js"><link rel="prefetch" href="/blog_publish/assets/js/127.018e3059.js"><link rel="prefetch" href="/blog_publish/assets/js/128.4e2e773d.js"><link rel="prefetch" href="/blog_publish/assets/js/129.6c2d067e.js"><link rel="prefetch" href="/blog_publish/assets/js/13.e04208fe.js"><link rel="prefetch" href="/blog_publish/assets/js/130.6c2c5ffc.js"><link rel="prefetch" href="/blog_publish/assets/js/131.3e7513a0.js"><link rel="prefetch" href="/blog_publish/assets/js/132.77dfdd6e.js"><link rel="prefetch" href="/blog_publish/assets/js/133.79e1719f.js"><link rel="prefetch" href="/blog_publish/assets/js/134.27b170fa.js"><link rel="prefetch" href="/blog_publish/assets/js/135.619f4d44.js"><link rel="prefetch" href="/blog_publish/assets/js/136.cd4a8231.js"><link rel="prefetch" href="/blog_publish/assets/js/137.835c717a.js"><link rel="prefetch" href="/blog_publish/assets/js/138.e526e678.js"><link rel="prefetch" href="/blog_publish/assets/js/139.4fc70460.js"><link rel="prefetch" href="/blog_publish/assets/js/14.f3b0fd44.js"><link rel="prefetch" href="/blog_publish/assets/js/140.101c013f.js"><link rel="prefetch" href="/blog_publish/assets/js/141.3c9bd613.js"><link rel="prefetch" href="/blog_publish/assets/js/142.b2914341.js"><link rel="prefetch" href="/blog_publish/assets/js/143.17543ae9.js"><link rel="prefetch" href="/blog_publish/assets/js/144.feed595c.js"><link rel="prefetch" href="/blog_publish/assets/js/145.d157f43b.js"><link rel="prefetch" href="/blog_publish/assets/js/146.8c6502a5.js"><link rel="prefetch" href="/blog_publish/assets/js/147.c1cffd0c.js"><link rel="prefetch" href="/blog_publish/assets/js/148.2ab3cbf3.js"><link rel="prefetch" href="/blog_publish/assets/js/149.f50a686b.js"><link rel="prefetch" href="/blog_publish/assets/js/15.1674a9a1.js"><link rel="prefetch" href="/blog_publish/assets/js/150.01a41088.js"><link rel="prefetch" href="/blog_publish/assets/js/151.ed44952e.js"><link rel="prefetch" href="/blog_publish/assets/js/152.aa89b33d.js"><link rel="prefetch" href="/blog_publish/assets/js/153.872d6ec6.js"><link rel="prefetch" href="/blog_publish/assets/js/154.872703d7.js"><link rel="prefetch" href="/blog_publish/assets/js/155.67e0685a.js"><link rel="prefetch" href="/blog_publish/assets/js/156.318f72dd.js"><link rel="prefetch" href="/blog_publish/assets/js/157.3bcf8abf.js"><link rel="prefetch" href="/blog_publish/assets/js/158.d8ecab9f.js"><link rel="prefetch" href="/blog_publish/assets/js/159.19f71ee0.js"><link rel="prefetch" href="/blog_publish/assets/js/16.1e14ddd0.js"><link rel="prefetch" href="/blog_publish/assets/js/160.2f4c44b9.js"><link rel="prefetch" href="/blog_publish/assets/js/161.a22dfdb2.js"><link rel="prefetch" href="/blog_publish/assets/js/162.f609ee77.js"><link rel="prefetch" href="/blog_publish/assets/js/163.5653d1e1.js"><link rel="prefetch" href="/blog_publish/assets/js/164.634ecac6.js"><link rel="prefetch" href="/blog_publish/assets/js/165.457fc5c8.js"><link rel="prefetch" href="/blog_publish/assets/js/166.c82caf20.js"><link rel="prefetch" href="/blog_publish/assets/js/167.28029a3d.js"><link rel="prefetch" href="/blog_publish/assets/js/168.eec8105f.js"><link rel="prefetch" href="/blog_publish/assets/js/169.245c180b.js"><link rel="prefetch" href="/blog_publish/assets/js/17.3bd6bdcc.js"><link rel="prefetch" href="/blog_publish/assets/js/170.c30004ac.js"><link rel="prefetch" href="/blog_publish/assets/js/171.8f7302f6.js"><link rel="prefetch" href="/blog_publish/assets/js/172.e8e9abef.js"><link rel="prefetch" href="/blog_publish/assets/js/173.dea33b64.js"><link rel="prefetch" href="/blog_publish/assets/js/174.9ce56724.js"><link rel="prefetch" href="/blog_publish/assets/js/175.0ac406c3.js"><link rel="prefetch" href="/blog_publish/assets/js/176.b1bfa555.js"><link rel="prefetch" href="/blog_publish/assets/js/177.08bdcc94.js"><link rel="prefetch" href="/blog_publish/assets/js/178.58930b8c.js"><link rel="prefetch" href="/blog_publish/assets/js/179.9d4db8da.js"><link rel="prefetch" href="/blog_publish/assets/js/18.6ec2b3a8.js"><link rel="prefetch" href="/blog_publish/assets/js/180.05373909.js"><link rel="prefetch" href="/blog_publish/assets/js/181.490bbf11.js"><link rel="prefetch" href="/blog_publish/assets/js/182.7e2228da.js"><link rel="prefetch" href="/blog_publish/assets/js/183.85810ff6.js"><link rel="prefetch" href="/blog_publish/assets/js/184.bb393681.js"><link rel="prefetch" href="/blog_publish/assets/js/185.c91ddbdf.js"><link rel="prefetch" href="/blog_publish/assets/js/186.c807283d.js"><link rel="prefetch" href="/blog_publish/assets/js/187.5a4b1d93.js"><link rel="prefetch" href="/blog_publish/assets/js/188.f45f0b78.js"><link rel="prefetch" href="/blog_publish/assets/js/189.58c07c45.js"><link rel="prefetch" href="/blog_publish/assets/js/19.d7ec203e.js"><link rel="prefetch" href="/blog_publish/assets/js/190.0ec01e24.js"><link rel="prefetch" href="/blog_publish/assets/js/191.67560ad6.js"><link rel="prefetch" href="/blog_publish/assets/js/192.550c7d63.js"><link rel="prefetch" href="/blog_publish/assets/js/193.05626409.js"><link rel="prefetch" href="/blog_publish/assets/js/194.60a4e24c.js"><link rel="prefetch" href="/blog_publish/assets/js/195.b844c165.js"><link rel="prefetch" href="/blog_publish/assets/js/196.4aa8b7fa.js"><link rel="prefetch" href="/blog_publish/assets/js/197.119574f3.js"><link rel="prefetch" href="/blog_publish/assets/js/198.b4cb2d92.js"><link rel="prefetch" href="/blog_publish/assets/js/199.29c43bba.js"><link rel="prefetch" href="/blog_publish/assets/js/20.08073f69.js"><link rel="prefetch" href="/blog_publish/assets/js/200.935d8d46.js"><link rel="prefetch" href="/blog_publish/assets/js/201.511775b2.js"><link rel="prefetch" href="/blog_publish/assets/js/202.5376bf80.js"><link rel="prefetch" href="/blog_publish/assets/js/203.6afc4cd2.js"><link rel="prefetch" href="/blog_publish/assets/js/204.bd328b02.js"><link rel="prefetch" href="/blog_publish/assets/js/205.a686bab1.js"><link rel="prefetch" href="/blog_publish/assets/js/206.784c0d6e.js"><link rel="prefetch" href="/blog_publish/assets/js/207.67fc9d48.js"><link rel="prefetch" href="/blog_publish/assets/js/208.7eb330b0.js"><link rel="prefetch" href="/blog_publish/assets/js/209.c4ab0828.js"><link rel="prefetch" href="/blog_publish/assets/js/21.bb057ae9.js"><link rel="prefetch" href="/blog_publish/assets/js/210.656513c1.js"><link rel="prefetch" href="/blog_publish/assets/js/211.9032df59.js"><link rel="prefetch" href="/blog_publish/assets/js/212.3722d8a9.js"><link rel="prefetch" href="/blog_publish/assets/js/213.21596272.js"><link rel="prefetch" href="/blog_publish/assets/js/214.fae231e7.js"><link rel="prefetch" href="/blog_publish/assets/js/215.46e95587.js"><link rel="prefetch" href="/blog_publish/assets/js/216.c0880b6b.js"><link rel="prefetch" href="/blog_publish/assets/js/217.28799515.js"><link rel="prefetch" href="/blog_publish/assets/js/218.46503de8.js"><link rel="prefetch" href="/blog_publish/assets/js/219.94a79819.js"><link rel="prefetch" href="/blog_publish/assets/js/22.50f46efd.js"><link rel="prefetch" href="/blog_publish/assets/js/220.86226c56.js"><link rel="prefetch" href="/blog_publish/assets/js/221.7560df84.js"><link rel="prefetch" href="/blog_publish/assets/js/222.9b227b5f.js"><link rel="prefetch" href="/blog_publish/assets/js/223.60e0c3ad.js"><link rel="prefetch" href="/blog_publish/assets/js/224.dd222d9f.js"><link rel="prefetch" href="/blog_publish/assets/js/225.06e773f8.js"><link rel="prefetch" href="/blog_publish/assets/js/226.35580cdc.js"><link rel="prefetch" href="/blog_publish/assets/js/227.ea8fe7e1.js"><link rel="prefetch" href="/blog_publish/assets/js/228.c3b84f5d.js"><link rel="prefetch" href="/blog_publish/assets/js/229.6279bc03.js"><link rel="prefetch" href="/blog_publish/assets/js/23.e616772b.js"><link rel="prefetch" href="/blog_publish/assets/js/230.dcf629f2.js"><link rel="prefetch" href="/blog_publish/assets/js/231.778c28a2.js"><link rel="prefetch" href="/blog_publish/assets/js/232.4110b1fe.js"><link rel="prefetch" href="/blog_publish/assets/js/233.38d40d4c.js"><link rel="prefetch" href="/blog_publish/assets/js/234.f7b7524c.js"><link rel="prefetch" href="/blog_publish/assets/js/235.ddd07e49.js"><link rel="prefetch" href="/blog_publish/assets/js/236.a087d3e6.js"><link rel="prefetch" href="/blog_publish/assets/js/237.4f0953b6.js"><link rel="prefetch" href="/blog_publish/assets/js/238.01073c89.js"><link rel="prefetch" href="/blog_publish/assets/js/239.04c5ab73.js"><link rel="prefetch" href="/blog_publish/assets/js/24.11bb4ff3.js"><link rel="prefetch" href="/blog_publish/assets/js/240.062f5d50.js"><link rel="prefetch" href="/blog_publish/assets/js/241.3a099b5c.js"><link rel="prefetch" href="/blog_publish/assets/js/242.ad88033a.js"><link rel="prefetch" href="/blog_publish/assets/js/243.c519e6e6.js"><link rel="prefetch" href="/blog_publish/assets/js/244.94f9b8bf.js"><link rel="prefetch" href="/blog_publish/assets/js/245.a91aaecf.js"><link rel="prefetch" href="/blog_publish/assets/js/246.43695127.js"><link rel="prefetch" href="/blog_publish/assets/js/247.a4cdf31d.js"><link rel="prefetch" href="/blog_publish/assets/js/248.b8a1b894.js"><link rel="prefetch" href="/blog_publish/assets/js/249.5354e138.js"><link rel="prefetch" href="/blog_publish/assets/js/25.83b8e31f.js"><link rel="prefetch" href="/blog_publish/assets/js/250.98b7de8b.js"><link rel="prefetch" href="/blog_publish/assets/js/251.f323bf91.js"><link rel="prefetch" href="/blog_publish/assets/js/252.c327ae4c.js"><link rel="prefetch" href="/blog_publish/assets/js/253.7b762e89.js"><link rel="prefetch" href="/blog_publish/assets/js/254.561f4f4b.js"><link rel="prefetch" href="/blog_publish/assets/js/255.2e13f8f6.js"><link rel="prefetch" href="/blog_publish/assets/js/256.db201f4e.js"><link rel="prefetch" href="/blog_publish/assets/js/257.42a3a885.js"><link rel="prefetch" href="/blog_publish/assets/js/258.21b46211.js"><link rel="prefetch" href="/blog_publish/assets/js/259.93e22c18.js"><link rel="prefetch" href="/blog_publish/assets/js/26.74cf307f.js"><link rel="prefetch" href="/blog_publish/assets/js/260.5fd4a2e3.js"><link rel="prefetch" href="/blog_publish/assets/js/261.afe65e31.js"><link rel="prefetch" href="/blog_publish/assets/js/262.e22c3fa3.js"><link rel="prefetch" href="/blog_publish/assets/js/263.b603890e.js"><link rel="prefetch" href="/blog_publish/assets/js/264.7987e39e.js"><link rel="prefetch" href="/blog_publish/assets/js/265.c599beb1.js"><link rel="prefetch" href="/blog_publish/assets/js/266.c997eb11.js"><link rel="prefetch" href="/blog_publish/assets/js/267.5bb1f8a9.js"><link rel="prefetch" href="/blog_publish/assets/js/268.7254b85d.js"><link rel="prefetch" href="/blog_publish/assets/js/269.e79fc2be.js"><link rel="prefetch" href="/blog_publish/assets/js/27.7d10fead.js"><link rel="prefetch" href="/blog_publish/assets/js/270.4498ec5f.js"><link rel="prefetch" href="/blog_publish/assets/js/271.33062319.js"><link rel="prefetch" href="/blog_publish/assets/js/272.2548abc6.js"><link rel="prefetch" href="/blog_publish/assets/js/273.ee10e2f0.js"><link rel="prefetch" href="/blog_publish/assets/js/274.4786f1af.js"><link rel="prefetch" href="/blog_publish/assets/js/275.3dd4da7d.js"><link rel="prefetch" href="/blog_publish/assets/js/276.064bacc7.js"><link rel="prefetch" href="/blog_publish/assets/js/277.53ecd1a3.js"><link rel="prefetch" href="/blog_publish/assets/js/278.d4b04eb0.js"><link rel="prefetch" href="/blog_publish/assets/js/279.b52b7a26.js"><link rel="prefetch" href="/blog_publish/assets/js/28.1e2623c9.js"><link rel="prefetch" href="/blog_publish/assets/js/280.a5ffc0e6.js"><link rel="prefetch" href="/blog_publish/assets/js/281.14f43c8f.js"><link rel="prefetch" href="/blog_publish/assets/js/282.0fd9a30d.js"><link rel="prefetch" href="/blog_publish/assets/js/283.1ba74fe9.js"><link rel="prefetch" href="/blog_publish/assets/js/284.d55047c0.js"><link rel="prefetch" href="/blog_publish/assets/js/285.51562b84.js"><link rel="prefetch" href="/blog_publish/assets/js/286.b6afb973.js"><link rel="prefetch" href="/blog_publish/assets/js/287.92299a07.js"><link rel="prefetch" href="/blog_publish/assets/js/288.6cfbff45.js"><link rel="prefetch" href="/blog_publish/assets/js/289.40928cad.js"><link rel="prefetch" href="/blog_publish/assets/js/29.7e094a4c.js"><link rel="prefetch" href="/blog_publish/assets/js/290.6ec85422.js"><link rel="prefetch" href="/blog_publish/assets/js/291.7de9c8f3.js"><link rel="prefetch" href="/blog_publish/assets/js/292.940f5e09.js"><link rel="prefetch" href="/blog_publish/assets/js/293.de264f7b.js"><link rel="prefetch" href="/blog_publish/assets/js/294.dc71f259.js"><link rel="prefetch" href="/blog_publish/assets/js/295.c8ca9ef3.js"><link rel="prefetch" href="/blog_publish/assets/js/296.3f46e875.js"><link rel="prefetch" href="/blog_publish/assets/js/297.0710e57a.js"><link rel="prefetch" href="/blog_publish/assets/js/298.d5f5d690.js"><link rel="prefetch" href="/blog_publish/assets/js/299.964b8c87.js"><link rel="prefetch" href="/blog_publish/assets/js/3.da89ce85.js"><link rel="prefetch" href="/blog_publish/assets/js/30.e62694e7.js"><link rel="prefetch" href="/blog_publish/assets/js/300.016f32e6.js"><link rel="prefetch" href="/blog_publish/assets/js/301.83e7d257.js"><link rel="prefetch" href="/blog_publish/assets/js/302.71c6eee4.js"><link rel="prefetch" href="/blog_publish/assets/js/303.cacaf593.js"><link rel="prefetch" href="/blog_publish/assets/js/304.4313d034.js"><link rel="prefetch" href="/blog_publish/assets/js/305.fd73d462.js"><link rel="prefetch" href="/blog_publish/assets/js/306.b7e66b24.js"><link rel="prefetch" href="/blog_publish/assets/js/307.41a05670.js"><link rel="prefetch" href="/blog_publish/assets/js/308.1c9cc63b.js"><link rel="prefetch" href="/blog_publish/assets/js/309.cc823174.js"><link rel="prefetch" href="/blog_publish/assets/js/31.e4947cb1.js"><link rel="prefetch" href="/blog_publish/assets/js/310.546a24f2.js"><link rel="prefetch" href="/blog_publish/assets/js/311.cedb6a85.js"><link rel="prefetch" href="/blog_publish/assets/js/312.61925df3.js"><link rel="prefetch" href="/blog_publish/assets/js/313.4a19d213.js"><link rel="prefetch" href="/blog_publish/assets/js/314.aa732337.js"><link rel="prefetch" href="/blog_publish/assets/js/315.8e5ef9fd.js"><link rel="prefetch" href="/blog_publish/assets/js/316.0638ea61.js"><link rel="prefetch" href="/blog_publish/assets/js/317.d5c2dfc9.js"><link rel="prefetch" href="/blog_publish/assets/js/318.654806e5.js"><link rel="prefetch" href="/blog_publish/assets/js/319.731b5a03.js"><link rel="prefetch" href="/blog_publish/assets/js/32.ef854c3e.js"><link rel="prefetch" href="/blog_publish/assets/js/320.16713c16.js"><link rel="prefetch" href="/blog_publish/assets/js/321.60a140b2.js"><link rel="prefetch" href="/blog_publish/assets/js/322.226d2345.js"><link rel="prefetch" href="/blog_publish/assets/js/323.f02badcf.js"><link rel="prefetch" href="/blog_publish/assets/js/324.67ae7471.js"><link rel="prefetch" href="/blog_publish/assets/js/325.e3f8bb06.js"><link rel="prefetch" href="/blog_publish/assets/js/326.e81cf3e9.js"><link rel="prefetch" href="/blog_publish/assets/js/327.5029469f.js"><link rel="prefetch" href="/blog_publish/assets/js/328.6b82fe30.js"><link rel="prefetch" href="/blog_publish/assets/js/329.f4375700.js"><link rel="prefetch" href="/blog_publish/assets/js/33.6ae16a8d.js"><link rel="prefetch" href="/blog_publish/assets/js/330.5767002c.js"><link rel="prefetch" href="/blog_publish/assets/js/331.5ce3ccf0.js"><link rel="prefetch" href="/blog_publish/assets/js/332.37986c8d.js"><link rel="prefetch" href="/blog_publish/assets/js/333.d934b242.js"><link rel="prefetch" href="/blog_publish/assets/js/334.9db1b0e5.js"><link rel="prefetch" href="/blog_publish/assets/js/335.ef38bb75.js"><link rel="prefetch" href="/blog_publish/assets/js/336.d736848f.js"><link rel="prefetch" href="/blog_publish/assets/js/337.38da4e43.js"><link rel="prefetch" href="/blog_publish/assets/js/338.90e0eadc.js"><link rel="prefetch" href="/blog_publish/assets/js/339.fdc10fb1.js"><link rel="prefetch" href="/blog_publish/assets/js/34.65d57b42.js"><link rel="prefetch" href="/blog_publish/assets/js/340.62ff3ffc.js"><link rel="prefetch" href="/blog_publish/assets/js/341.c0e3aebc.js"><link rel="prefetch" href="/blog_publish/assets/js/342.a5240d6b.js"><link rel="prefetch" href="/blog_publish/assets/js/343.b004a8d9.js"><link rel="prefetch" href="/blog_publish/assets/js/344.95876392.js"><link rel="prefetch" href="/blog_publish/assets/js/345.51aa16e9.js"><link rel="prefetch" href="/blog_publish/assets/js/346.d75ecfd0.js"><link rel="prefetch" href="/blog_publish/assets/js/347.985149de.js"><link rel="prefetch" href="/blog_publish/assets/js/348.d8d687f5.js"><link rel="prefetch" href="/blog_publish/assets/js/349.7e7ca5ec.js"><link rel="prefetch" href="/blog_publish/assets/js/35.56050f40.js"><link rel="prefetch" href="/blog_publish/assets/js/350.019b8bbd.js"><link rel="prefetch" href="/blog_publish/assets/js/351.45f01673.js"><link rel="prefetch" href="/blog_publish/assets/js/352.b2ddd843.js"><link rel="prefetch" href="/blog_publish/assets/js/353.a32e44cd.js"><link rel="prefetch" href="/blog_publish/assets/js/354.534ccc2b.js"><link rel="prefetch" href="/blog_publish/assets/js/355.c56874e1.js"><link rel="prefetch" href="/blog_publish/assets/js/356.2be7d2e5.js"><link rel="prefetch" href="/blog_publish/assets/js/357.f86ea9a9.js"><link rel="prefetch" href="/blog_publish/assets/js/358.a64c78ae.js"><link rel="prefetch" href="/blog_publish/assets/js/359.2059382a.js"><link rel="prefetch" href="/blog_publish/assets/js/36.2d5d7e6b.js"><link rel="prefetch" href="/blog_publish/assets/js/360.927a83f4.js"><link rel="prefetch" href="/blog_publish/assets/js/361.90a81d10.js"><link rel="prefetch" href="/blog_publish/assets/js/362.574449dd.js"><link rel="prefetch" href="/blog_publish/assets/js/363.f609cd69.js"><link rel="prefetch" href="/blog_publish/assets/js/364.d3f9a088.js"><link rel="prefetch" href="/blog_publish/assets/js/365.0be572f5.js"><link rel="prefetch" href="/blog_publish/assets/js/366.0588e091.js"><link rel="prefetch" href="/blog_publish/assets/js/367.880937ec.js"><link rel="prefetch" href="/blog_publish/assets/js/368.2883cb9d.js"><link rel="prefetch" href="/blog_publish/assets/js/369.be921729.js"><link rel="prefetch" href="/blog_publish/assets/js/37.49c9f456.js"><link rel="prefetch" href="/blog_publish/assets/js/38.1b5d7b41.js"><link rel="prefetch" href="/blog_publish/assets/js/39.2cbbaf69.js"><link rel="prefetch" href="/blog_publish/assets/js/4.2f221ef2.js"><link rel="prefetch" href="/blog_publish/assets/js/40.d5830858.js"><link rel="prefetch" href="/blog_publish/assets/js/41.75c51ce5.js"><link rel="prefetch" href="/blog_publish/assets/js/42.f5fe6a8c.js"><link rel="prefetch" href="/blog_publish/assets/js/43.3563d9a7.js"><link rel="prefetch" href="/blog_publish/assets/js/44.c83f6491.js"><link rel="prefetch" href="/blog_publish/assets/js/45.ee9eee24.js"><link rel="prefetch" href="/blog_publish/assets/js/46.5b36c67f.js"><link rel="prefetch" href="/blog_publish/assets/js/47.ec5c4e31.js"><link rel="prefetch" href="/blog_publish/assets/js/48.3e9f3fca.js"><link rel="prefetch" href="/blog_publish/assets/js/49.dd92d1c0.js"><link rel="prefetch" href="/blog_publish/assets/js/5.46cac9d5.js"><link rel="prefetch" href="/blog_publish/assets/js/50.3c4f7842.js"><link rel="prefetch" href="/blog_publish/assets/js/51.9dd7f6db.js"><link rel="prefetch" href="/blog_publish/assets/js/52.a1fae65d.js"><link rel="prefetch" href="/blog_publish/assets/js/53.7dcb9128.js"><link rel="prefetch" href="/blog_publish/assets/js/54.0216dec8.js"><link rel="prefetch" href="/blog_publish/assets/js/55.a1edbbba.js"><link rel="prefetch" href="/blog_publish/assets/js/56.d5eba99f.js"><link rel="prefetch" href="/blog_publish/assets/js/57.259a19f3.js"><link rel="prefetch" href="/blog_publish/assets/js/58.05a71db8.js"><link rel="prefetch" href="/blog_publish/assets/js/59.94bbdb60.js"><link rel="prefetch" href="/blog_publish/assets/js/6.6ba0b3b7.js"><link rel="prefetch" href="/blog_publish/assets/js/60.1b397d1e.js"><link rel="prefetch" href="/blog_publish/assets/js/61.fa6bb9dc.js"><link rel="prefetch" href="/blog_publish/assets/js/62.954c903e.js"><link rel="prefetch" href="/blog_publish/assets/js/63.0cba7afb.js"><link rel="prefetch" href="/blog_publish/assets/js/64.f0ecd913.js"><link rel="prefetch" href="/blog_publish/assets/js/65.c9cbcd0e.js"><link rel="prefetch" href="/blog_publish/assets/js/66.17e2d342.js"><link rel="prefetch" href="/blog_publish/assets/js/67.58db9e36.js"><link rel="prefetch" href="/blog_publish/assets/js/68.dc48f715.js"><link rel="prefetch" href="/blog_publish/assets/js/69.0a7d91e7.js"><link rel="prefetch" href="/blog_publish/assets/js/7.d29987d1.js"><link rel="prefetch" href="/blog_publish/assets/js/70.b0e8966e.js"><link rel="prefetch" href="/blog_publish/assets/js/71.3c9b5e9a.js"><link rel="prefetch" href="/blog_publish/assets/js/72.67cd83aa.js"><link rel="prefetch" href="/blog_publish/assets/js/73.98d2f6c9.js"><link rel="prefetch" href="/blog_publish/assets/js/74.c5dfe100.js"><link rel="prefetch" href="/blog_publish/assets/js/75.144d1a17.js"><link rel="prefetch" href="/blog_publish/assets/js/77.ac969e91.js"><link rel="prefetch" href="/blog_publish/assets/js/78.edb94059.js"><link rel="prefetch" href="/blog_publish/assets/js/79.24f40785.js"><link rel="prefetch" href="/blog_publish/assets/js/8.e7386903.js"><link rel="prefetch" href="/blog_publish/assets/js/80.23b6ed20.js"><link rel="prefetch" href="/blog_publish/assets/js/81.c15a1ed2.js"><link rel="prefetch" href="/blog_publish/assets/js/82.433a7e5a.js"><link rel="prefetch" href="/blog_publish/assets/js/83.4b2c7624.js"><link rel="prefetch" href="/blog_publish/assets/js/84.8a0e48f3.js"><link rel="prefetch" href="/blog_publish/assets/js/85.98461ad1.js"><link rel="prefetch" href="/blog_publish/assets/js/86.ca3fa9d2.js"><link rel="prefetch" href="/blog_publish/assets/js/87.f838d375.js"><link rel="prefetch" href="/blog_publish/assets/js/88.837f48d2.js"><link rel="prefetch" href="/blog_publish/assets/js/89.8f3e376e.js"><link rel="prefetch" href="/blog_publish/assets/js/9.c8d57497.js"><link rel="prefetch" href="/blog_publish/assets/js/90.7e0e0332.js"><link rel="prefetch" href="/blog_publish/assets/js/91.f56fe3c2.js"><link rel="prefetch" href="/blog_publish/assets/js/92.76a65b83.js"><link rel="prefetch" href="/blog_publish/assets/js/93.44d2fb2e.js"><link rel="prefetch" href="/blog_publish/assets/js/94.f387b4cf.js"><link rel="prefetch" href="/blog_publish/assets/js/95.cc1943d3.js"><link rel="prefetch" href="/blog_publish/assets/js/96.c9a06121.js"><link rel="prefetch" href="/blog_publish/assets/js/97.50fcfc00.js"><link rel="prefetch" href="/blog_publish/assets/js/98.b61ef0a7.js"><link rel="prefetch" href="/blog_publish/assets/js/99.6a3e8e90.js">
    <link rel="stylesheet" href="/blog_publish/assets/css/0.styles.9a82886c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_publish/" class="home-link router-link-active"><!----> <span class="site-name">小游</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>编程基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/01_Java8新特性.html" class="sidebar-link">java8新特性</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/02_Java集合.html" class="sidebar-link">Java 集合</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/03_反射.html" class="sidebar-link">反射</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/IO/01_BIO.html" class="sidebar-link">Java-BIO</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/IO/02_NIO.html" class="sidebar-link">Java-NIO</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>多线程&amp;高并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JDK_Tools</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="locksupport与线程中断"><a href="#locksupport与线程中断" class="header-anchor">#</a> LockSupport与线程中断</h1> <h2 id="一、线程中断"><a href="#一、线程中断" class="header-anchor">#</a> 一、线程中断</h2> <p>面试题：如何理解下面三个API</p> <p><a data-fancybox="" title="image-20210411220513433" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/e4f46a453cec46d5861c1fd142d9ab7a.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/e4f46a453cec46d5861c1fd142d9ab7a.png" alt="image-20210411220513433"></a></p> <p>如何停止、中断一个运行中的线程？？</p> <h3 id="_1-1-什么是中断"><a href="#_1-1-什么是中断" class="header-anchor">#</a> 1.1 什么是中断</h3> <p><strong>首先</strong> <strong>一个线程不应该由其他线程来强制中断或停止，而是应该由线程自己自行停止</strong>。所以，Thread.stop, Thread.suspend, Thread.resume 都已经被废弃了。</p> <p><strong>其次</strong>
在Java中没有办法立即停止一条线程，然而停止线程却显得尤为重要，如取消一个耗时操作。
因此，<strong>Java提供了一种用于停止线程的机制——中断</strong>。</p> <p><strong>中断只是一种协作机制</strong>，<strong>Java没有给中断增加任何语法，中断的过程完全需要程序员自己实现</strong>。
若要中断一个线程，你需要手动调用该线程的interrupt方法，该方法也仅仅是<strong>将线程对象的中断标识设成true</strong>；
接着你需要自己写代码不断地检测当前线程的标识位，如果为true，表示别的线程要求这条线程中断，此时究竟该做什么需要你自己写代码实现。</p> <p><strong>每个线程对象中都有一个标识，用于表示线程是否被中断</strong>；该标识位为true表示中断，为false表示未中断；通过调用线程对象的<code>interrupt</code>方法将该线程的标识位设为true；可以在别的线程中调用，也可以在自己的线程中调用。</p> <h3 id="_1-2-中断相关的api"><a href="#_1-2-中断相关的api" class="header-anchor">#</a> 1.2 中断相关的API</h3> <p><a data-fancybox="" title="image-20210411220950039" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/db9ca9d116284998834ebb2071747dbc.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/db9ca9d116284998834ebb2071747dbc.png" alt="image-20210411220950039"></a></p> <p><a data-fancybox="" title="image-20210411220959648" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/63cc8bc6964441328625f3942ecf43a7.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/63cc8bc6964441328625f3942ecf43a7.png" alt="image-20210411220959648"></a></p> <h3 id="_1-3-如何使用中断标识停止线程"><a href="#_1-3-如何使用中断标识停止线程" class="header-anchor">#</a> 1.3 如何使用中断标识停止线程</h3> <p>在需要中断的线程中不断监听中断状态，一旦发生中断，就执行相应的中断处理业务逻辑。</p> <ol><li>修改中断状态</li> <li>停止线程</li></ol> <p><strong>使用Volatile变量实现</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用AtomicBoolean实现</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">AtomicBoolean</span> atomicBoolean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicBoolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>atomicBoolean<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> atomicBoolean<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用Thread类中的API实现</strong></p> <p><strong>API</strong></p> <p><a data-fancybox="" title="image-20210411231532342" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/3ad4c513b11842d181212d7a1917bcfc.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/3ad4c513b11842d181212d7a1917bcfc.png" alt="image-20210411231532342"></a></p> <p><a data-fancybox="" title="image-20210411231543183" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/13009dcdc035438f84e199043ef2202b.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/13009dcdc035438f84e199043ef2202b.png" alt="image-20210411231543183"></a></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>thread<span class="token operator">::</span><span class="token function">interrupt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-4-当前线程的中断标识为true，是不是就立刻停止"><a href="#_1-4-当前线程的中断标识为true，是不是就立刻停止" class="header-anchor">#</a> 1.4 当前线程的中断标识为true，是不是就立刻停止</h3> <p>具体来说，当对一个线程，调用<code>interrupt()</code> 时：</p> <ol><li><p>如果线程处于正常活动状态，那么会将该线程的中断标志设置为 true，仅此而已。
<strong>被设置中断标志的线程将继续正常运行</strong>，不受影响。所以， interrupt() 并不能真正的中断线程，需要被调用的线程自己进行配合才行。</p></li> <li><p>如果线程处于被阻塞状态（例如处于sleep, wait, join 等状态），在别的线程中调用当前线程对象的interrupt方法，<strong>那么线程将立即退出被阻塞状态，并抛出一个InterruptedException异常</strong>。</p></li></ol> <p><strong>线程处于正常活动状态，将中断标识设置为true，现场会继续运行</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 线程执行到此处时，当前线程的中断标识已经被设置为true</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2、线程中断状态：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// thread线程刚刚启动，所以中断标识为false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 虽然thread线程的中断标识已经被设置为true，但是thread1并没有被中断</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// thread线程已经停止，所以中断标识为false</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程处于阻塞状态，将中断标识设置为true，线程会抛出异常，并将中断标识设置为false</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正常运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于线程的中断标识在抛出异常后被清除（设置为false），所以线程不会中断，会继续运行</p> <p><a data-fancybox="" title="image-20210411233506243" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/6111e2477f85457f8a8234311fc65b9d.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/6111e2477f85457f8a8234311fc65b9d.png" alt="image-20210411233506243"></a></p> <p><strong>中断线程</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正常运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在线程进入阻塞状态后，调用线程中断方法，线程会抛出异常，并将中断标识设置为false，因此线程会继续运行。<strong>为了停止线程，需要在catch块中再次调用线程中断方法。</strong></p> <p><a data-fancybox="" title="image-20210411233638182" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/da8bfd6f59f2480280d24bca6589e4ed.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/da8bfd6f59f2480280d24bca6589e4ed.png" alt="image-20210411233638182"></a></p> <p><strong>结论：中断只是一种协同机制，仅修改终端标识位而已，不会立刻</strong></p> <h3 id="_1-5-静态方法thread-interrupted"><a href="#_1-5-静态方法thread-interrupted" class="header-anchor">#</a> 1.5 静态方法<code>Thread.interrupted()</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;111111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;222222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a data-fancybox="" title="image-20210411234312009" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/7eca0d77e3104d21855a6c89449ab0f3.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/7eca0d77e3104d21855a6c89449ab0f3.png" alt="image-20210411234312009"></a></p> <p><strong>说明：</strong></p> <p><a data-fancybox="" title="image-20210411234332934" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/098a85d503e04a9d8461c69b9af03596.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/098a85d503e04a9d8461c69b9af03596.png" alt="image-20210411234332934"></a></p> <p><a data-fancybox="" title="image-20210411234343071" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/9c229d9e10bc47308603905de97b2592.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/9c229d9e10bc47308603905de97b2592.png" alt="image-20210411234343071"></a></p> <p><strong>实例方法<code>isInterrupted</code>与静态方法<code>interrupted</code>对比</strong></p> <p><a data-fancybox="" title="image-20210411234504973" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/f7688773d3be49318013cfddea7913ae.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/f7688773d3be49318013cfddea7913ae.png" alt="image-20210411234504973"></a></p> <p><strong>实例方法：</strong></p> <p><a data-fancybox="" title="image-20210411234533002" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/fe90aed83bba447b88f2f67a6dfea589.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/fe90aed83bba447b88f2f67a6dfea589.png" alt="image-20210411234533002"></a></p> <p><strong>静态方法：</strong></p> <p><a data-fancybox="" title="image-20210411234521063" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/ae3fb6b6af6f47c18782a55579c4ff14.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/ae3fb6b6af6f47c18782a55579c4ff14.png" alt="image-20210411234521063"></a></p> <p><strong>结论：</strong></p> <p>这两个方法底层都是调用了一个本地方法：</p> <p><a data-fancybox="" title="image-20210411234638683" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/2eba2bdfff694ab985b2c832bb1c6ad2.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/2eba2bdfff694ab985b2c832bb1c6ad2.png" alt="image-20210411234638683"></a></p> <p><strong>区别：</strong></p> <ol><li><p>静态方法interrupted将       会清除中断状态（传入的参数ClearInterrupted为true），</p></li> <li><p>实例方法isInterrupted则不会（传入的参数ClearInterrupted为false）。</p></li></ol> <h3 id="_1-6-总结"><a href="#_1-6-总结" class="header-anchor">#</a> 1.6 总结</h3> <p>线程中断相关的方法：</p> <ul><li><p><strong>interrupt()方法是一个实例方法</strong>
它通知目标线程中断，也就是设置目标线程的中断标志位为true，中断标志位表示当前线程已经被中断了。</p></li> <li><p><strong>isInterrupted()方法也是一个实例方法</strong>
它判断当前线程是否被中断（通过检查中断标志位）并获取中断标志</p></li> <li><p><strong>Thread类的静态方法interrupted()</strong>
返回当前线程的中断状态(boolean类型)且将当前线程的中断状态设为false，此方法调用之后会清除当前线程的中断标志位的状态（将中断标志置为false了），返回当前值并清零置false</p></li></ul> <h2 id="二、线程等待唤醒机制"><a href="#二、线程等待唤醒机制" class="header-anchor">#</a> 二、线程等待唤醒机制</h2> <h3 id="_2-1-三种让线程等待与唤醒的方式"><a href="#_2-1-三种让线程等待与唤醒的方式" class="header-anchor">#</a> 2.1 三种让线程等待与唤醒的方式</h3> <ol><li>使用Object类中的wait方法让线程等待；使用Object类中的notify唤醒线程</li> <li>使用Condition类中的await方法让线程等待；使用Condition类中的signal方法唤醒线程</li> <li>使用LockSupport类中的park方法让线程等待，使用LockSupport类中的unpark方法唤醒线程</li></ol> <h3 id="_2-2-object类中的wait和notify"><a href="#_2-2-object类中的wait和notify" class="header-anchor">#</a> 2.2 Object类中的wait和notify</h3> <p><strong>wait方法与notify方法必须在Synchronized锁定区域使用，否则会出现以下异常</strong></p> <p><a data-fancybox="" title="image-20210412211440395" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/707f002f2d6b458682827fb60fba4db4.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/707f002f2d6b458682827fb60fba4db4.png" alt="image-20210412211440395"></a></p> <p><strong>wait与notify需要成对出现，wait必须在notify之前执行，否则程序会被阻塞</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WaitNotifyDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> objectLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>objectLock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; is coming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; wait &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    objectLock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; notify &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>objectLock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                objectLock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; 发出通知，唤醒线程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-condition中的await与signal"><a href="#_2-3-condition中的await与signal" class="header-anchor">#</a> 2.3 Condition中的await与signal</h3> <p><strong>await方法与signal方法需要在lock锁定区域使用，否则会出现以下异常</strong></p> <p><a data-fancybox="" title="image-20210412212257148" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/84edada3350648108428e4ebac7ae286.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/84edada3350648108428e4ebac7ae286.png" alt="image-20210412212257148"></a></p> <p><strong>await与signal需要成对使用，await需要先于signal执行，否则线程会被阻塞</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">Condition</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">Lock</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">ReentrantLock</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AwaitSignalDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Condition</span> condition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; come&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                condition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; await&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; signal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                condition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-4-object和condition使用的限制条件"><a href="#_2-4-object和condition使用的限制条件" class="header-anchor">#</a> 2.4 Object和Condition使用的限制条件</h3> <p><strong>线程需要先持有锁，必须在Synchronized或Lock锁定区域。必须先等待后唤醒</strong></p> <h3 id="_2-5-locksupport类中的park与unpark"><a href="#_2-5-locksupport类中的park与unpark" class="header-anchor">#</a> 2.5 LockSupport类中的park与unpark</h3> <p>LockSupport是用来创建锁和其他同步类的基本线程阻塞原语。</p> <p>park与unpark方法能够实现线程的阻塞与唤醒操作。<strong>LockSupport类使用了一种名为<code>Permit</code>（许可）的概念来做到阻塞和唤醒线程的功能</strong>， <strong>每个线程都有一个许可(permit)，permit只有两个值1和零，默认是零</strong>。可以把许可看成是一种(0,1)信号量（Semaphore），但与 Semaphore 不同的是，<strong>许可的累加上限是1</strong>。</p> <ul><li><p>park：<code>LockSupport.park()</code>，让当前线程进入阻塞状态</p></li> <li><p>unpark：<code>LockSupport.unpark(Thread thread)</code>，唤醒指定线程</p></li></ul> <p><strong>park与unpark执行没有顺序要求，可以先unpark，再park。</strong></p> <p><strong>park与unpark不需要在锁区域执行。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">LockSupport</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParkUnParkDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; come &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; park &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; unPark &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>thread1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog_publish/assets/js/app.e29f9086.js" defer></script><script src="/blog_publish/assets/js/2.92f2819f.js" defer></script><script src="/blog_publish/assets/js/76.b8695919.js" defer></script>
  </body>
</html>
