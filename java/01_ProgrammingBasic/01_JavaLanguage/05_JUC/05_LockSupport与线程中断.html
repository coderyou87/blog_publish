<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LockSupport与线程中断 | 小游</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon1" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-02-18/d687f535b564447e82a3178a4e9b2f8c.jpg">
    <link rel="icon2" href="https://you-blog.oss-cn-shenzhen.aliyuncs.com/typora/2021-02-18/icon.jpg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="知行合一">
    <link rel="preload" href="/blog_publish/assets/css/0.styles.9a82886c.css" as="style"><link rel="preload" href="/blog_publish/assets/js/app.4e527556.js" as="script"><link rel="preload" href="/blog_publish/assets/js/2.92f2819f.js" as="script"><link rel="preload" href="/blog_publish/assets/js/76.2f766dbd.js" as="script"><link rel="prefetch" href="/blog_publish/assets/js/10.43a4635a.js"><link rel="prefetch" href="/blog_publish/assets/js/100.8980e036.js"><link rel="prefetch" href="/blog_publish/assets/js/101.6891c488.js"><link rel="prefetch" href="/blog_publish/assets/js/102.b91d6ba3.js"><link rel="prefetch" href="/blog_publish/assets/js/103.c25c0370.js"><link rel="prefetch" href="/blog_publish/assets/js/104.404d1f36.js"><link rel="prefetch" href="/blog_publish/assets/js/105.563eca99.js"><link rel="prefetch" href="/blog_publish/assets/js/106.db456bcf.js"><link rel="prefetch" href="/blog_publish/assets/js/107.bbece537.js"><link rel="prefetch" href="/blog_publish/assets/js/108.b8a28877.js"><link rel="prefetch" href="/blog_publish/assets/js/109.bcc5bac8.js"><link rel="prefetch" href="/blog_publish/assets/js/11.b061ebed.js"><link rel="prefetch" href="/blog_publish/assets/js/110.a43977cc.js"><link rel="prefetch" href="/blog_publish/assets/js/111.ebdc6a20.js"><link rel="prefetch" href="/blog_publish/assets/js/112.313be3a9.js"><link rel="prefetch" href="/blog_publish/assets/js/113.04408de4.js"><link rel="prefetch" href="/blog_publish/assets/js/114.59f9a39f.js"><link rel="prefetch" href="/blog_publish/assets/js/115.f79ba2f4.js"><link rel="prefetch" href="/blog_publish/assets/js/116.448136fd.js"><link rel="prefetch" href="/blog_publish/assets/js/117.6bf01c17.js"><link rel="prefetch" href="/blog_publish/assets/js/118.4362d297.js"><link rel="prefetch" href="/blog_publish/assets/js/119.6ec7df12.js"><link rel="prefetch" href="/blog_publish/assets/js/12.87e18dee.js"><link rel="prefetch" href="/blog_publish/assets/js/120.943667fa.js"><link rel="prefetch" href="/blog_publish/assets/js/121.bda28caf.js"><link rel="prefetch" href="/blog_publish/assets/js/122.f823a2d6.js"><link rel="prefetch" href="/blog_publish/assets/js/123.90e06d98.js"><link rel="prefetch" href="/blog_publish/assets/js/124.fe0d4e5b.js"><link rel="prefetch" href="/blog_publish/assets/js/125.3f141966.js"><link rel="prefetch" href="/blog_publish/assets/js/126.37ab298f.js"><link rel="prefetch" href="/blog_publish/assets/js/127.8f331900.js"><link rel="prefetch" href="/blog_publish/assets/js/128.171bd7f9.js"><link rel="prefetch" href="/blog_publish/assets/js/129.69995c27.js"><link rel="prefetch" href="/blog_publish/assets/js/13.168df415.js"><link rel="prefetch" href="/blog_publish/assets/js/130.1c43e3f4.js"><link rel="prefetch" href="/blog_publish/assets/js/131.c5908ca7.js"><link rel="prefetch" href="/blog_publish/assets/js/132.a6b68d4c.js"><link rel="prefetch" href="/blog_publish/assets/js/133.6a610392.js"><link rel="prefetch" href="/blog_publish/assets/js/134.d5140a25.js"><link rel="prefetch" href="/blog_publish/assets/js/135.f3c8c04c.js"><link rel="prefetch" href="/blog_publish/assets/js/136.b62f059d.js"><link rel="prefetch" href="/blog_publish/assets/js/137.68171560.js"><link rel="prefetch" href="/blog_publish/assets/js/138.f66c3946.js"><link rel="prefetch" href="/blog_publish/assets/js/139.9c0731ca.js"><link rel="prefetch" href="/blog_publish/assets/js/14.89e7daa6.js"><link rel="prefetch" href="/blog_publish/assets/js/140.2f887279.js"><link rel="prefetch" href="/blog_publish/assets/js/141.d05ef8d8.js"><link rel="prefetch" href="/blog_publish/assets/js/142.d819d860.js"><link rel="prefetch" href="/blog_publish/assets/js/143.110e4fbe.js"><link rel="prefetch" href="/blog_publish/assets/js/144.3d48aed1.js"><link rel="prefetch" href="/blog_publish/assets/js/145.2014702f.js"><link rel="prefetch" href="/blog_publish/assets/js/146.8bf2b94b.js"><link rel="prefetch" href="/blog_publish/assets/js/147.188b8e44.js"><link rel="prefetch" href="/blog_publish/assets/js/148.379e99b6.js"><link rel="prefetch" href="/blog_publish/assets/js/149.6868738d.js"><link rel="prefetch" href="/blog_publish/assets/js/15.d530c3b2.js"><link rel="prefetch" href="/blog_publish/assets/js/150.cb3cc1e7.js"><link rel="prefetch" href="/blog_publish/assets/js/151.3560fd0c.js"><link rel="prefetch" href="/blog_publish/assets/js/152.57357b11.js"><link rel="prefetch" href="/blog_publish/assets/js/153.5577a11b.js"><link rel="prefetch" href="/blog_publish/assets/js/154.27c076e6.js"><link rel="prefetch" href="/blog_publish/assets/js/155.6e7a6e05.js"><link rel="prefetch" href="/blog_publish/assets/js/156.874518b4.js"><link rel="prefetch" href="/blog_publish/assets/js/157.f633daea.js"><link rel="prefetch" href="/blog_publish/assets/js/158.861aa85b.js"><link rel="prefetch" href="/blog_publish/assets/js/159.0068556f.js"><link rel="prefetch" href="/blog_publish/assets/js/16.fd5b3b78.js"><link rel="prefetch" href="/blog_publish/assets/js/160.db7081e7.js"><link rel="prefetch" href="/blog_publish/assets/js/161.d93316de.js"><link rel="prefetch" href="/blog_publish/assets/js/162.c2f561fe.js"><link rel="prefetch" href="/blog_publish/assets/js/163.98406fd7.js"><link rel="prefetch" href="/blog_publish/assets/js/164.b4a7a898.js"><link rel="prefetch" href="/blog_publish/assets/js/165.1a3ae15b.js"><link rel="prefetch" href="/blog_publish/assets/js/166.8cefcff7.js"><link rel="prefetch" href="/blog_publish/assets/js/167.2f58d244.js"><link rel="prefetch" href="/blog_publish/assets/js/168.d82b0799.js"><link rel="prefetch" href="/blog_publish/assets/js/169.7cc1bf17.js"><link rel="prefetch" href="/blog_publish/assets/js/17.55e72157.js"><link rel="prefetch" href="/blog_publish/assets/js/170.67c50100.js"><link rel="prefetch" href="/blog_publish/assets/js/171.b2e15335.js"><link rel="prefetch" href="/blog_publish/assets/js/172.e355d811.js"><link rel="prefetch" href="/blog_publish/assets/js/173.06b2cc24.js"><link rel="prefetch" href="/blog_publish/assets/js/174.fe78ed82.js"><link rel="prefetch" href="/blog_publish/assets/js/175.183526f3.js"><link rel="prefetch" href="/blog_publish/assets/js/176.0bc5d59b.js"><link rel="prefetch" href="/blog_publish/assets/js/177.04fa94a1.js"><link rel="prefetch" href="/blog_publish/assets/js/178.c8d78269.js"><link rel="prefetch" href="/blog_publish/assets/js/179.c71eb94b.js"><link rel="prefetch" href="/blog_publish/assets/js/18.c928c493.js"><link rel="prefetch" href="/blog_publish/assets/js/180.27b21909.js"><link rel="prefetch" href="/blog_publish/assets/js/181.ee8c957d.js"><link rel="prefetch" href="/blog_publish/assets/js/182.229de909.js"><link rel="prefetch" href="/blog_publish/assets/js/183.28e36973.js"><link rel="prefetch" href="/blog_publish/assets/js/184.921dad1d.js"><link rel="prefetch" href="/blog_publish/assets/js/185.d88c8c79.js"><link rel="prefetch" href="/blog_publish/assets/js/186.44f670ac.js"><link rel="prefetch" href="/blog_publish/assets/js/187.01acaa2e.js"><link rel="prefetch" href="/blog_publish/assets/js/188.ea46513b.js"><link rel="prefetch" href="/blog_publish/assets/js/189.1949d177.js"><link rel="prefetch" href="/blog_publish/assets/js/19.7c22b6ed.js"><link rel="prefetch" href="/blog_publish/assets/js/190.e3d6699e.js"><link rel="prefetch" href="/blog_publish/assets/js/191.e41fab23.js"><link rel="prefetch" href="/blog_publish/assets/js/192.b8a97efb.js"><link rel="prefetch" href="/blog_publish/assets/js/193.910f4549.js"><link rel="prefetch" href="/blog_publish/assets/js/194.82e9b96b.js"><link rel="prefetch" href="/blog_publish/assets/js/195.b26d306e.js"><link rel="prefetch" href="/blog_publish/assets/js/196.94dee4a4.js"><link rel="prefetch" href="/blog_publish/assets/js/197.d96b5f6b.js"><link rel="prefetch" href="/blog_publish/assets/js/198.2e25d343.js"><link rel="prefetch" href="/blog_publish/assets/js/199.156cf2c8.js"><link rel="prefetch" href="/blog_publish/assets/js/20.a0b386a1.js"><link rel="prefetch" href="/blog_publish/assets/js/200.954f8dfb.js"><link rel="prefetch" href="/blog_publish/assets/js/201.65f39347.js"><link rel="prefetch" href="/blog_publish/assets/js/202.56678226.js"><link rel="prefetch" href="/blog_publish/assets/js/203.a28925c9.js"><link rel="prefetch" href="/blog_publish/assets/js/204.bf4f4a90.js"><link rel="prefetch" href="/blog_publish/assets/js/205.c79624a4.js"><link rel="prefetch" href="/blog_publish/assets/js/206.16d25eb9.js"><link rel="prefetch" href="/blog_publish/assets/js/207.60e15733.js"><link rel="prefetch" href="/blog_publish/assets/js/208.39754703.js"><link rel="prefetch" href="/blog_publish/assets/js/209.d70ea226.js"><link rel="prefetch" href="/blog_publish/assets/js/21.58ffb29b.js"><link rel="prefetch" href="/blog_publish/assets/js/210.50d3b0bd.js"><link rel="prefetch" href="/blog_publish/assets/js/211.3bf3f9ca.js"><link rel="prefetch" href="/blog_publish/assets/js/212.fb1a8508.js"><link rel="prefetch" href="/blog_publish/assets/js/213.00cd91d3.js"><link rel="prefetch" href="/blog_publish/assets/js/214.21e04416.js"><link rel="prefetch" href="/blog_publish/assets/js/215.c1fa1a2c.js"><link rel="prefetch" href="/blog_publish/assets/js/216.8f6dcd48.js"><link rel="prefetch" href="/blog_publish/assets/js/217.2f137036.js"><link rel="prefetch" href="/blog_publish/assets/js/218.deba6e9c.js"><link rel="prefetch" href="/blog_publish/assets/js/219.9663eaa5.js"><link rel="prefetch" href="/blog_publish/assets/js/22.eca1722c.js"><link rel="prefetch" href="/blog_publish/assets/js/220.660ba278.js"><link rel="prefetch" href="/blog_publish/assets/js/221.f595e1b4.js"><link rel="prefetch" href="/blog_publish/assets/js/222.b97c220d.js"><link rel="prefetch" href="/blog_publish/assets/js/223.4c200ee3.js"><link rel="prefetch" href="/blog_publish/assets/js/224.6884acdf.js"><link rel="prefetch" href="/blog_publish/assets/js/225.212c0c8c.js"><link rel="prefetch" href="/blog_publish/assets/js/226.4571a2c8.js"><link rel="prefetch" href="/blog_publish/assets/js/227.655c4298.js"><link rel="prefetch" href="/blog_publish/assets/js/228.653b0530.js"><link rel="prefetch" href="/blog_publish/assets/js/229.1ed95eeb.js"><link rel="prefetch" href="/blog_publish/assets/js/23.c1c0be9e.js"><link rel="prefetch" href="/blog_publish/assets/js/230.5f555f42.js"><link rel="prefetch" href="/blog_publish/assets/js/231.1e66c86b.js"><link rel="prefetch" href="/blog_publish/assets/js/232.c2cd31a6.js"><link rel="prefetch" href="/blog_publish/assets/js/233.5192f567.js"><link rel="prefetch" href="/blog_publish/assets/js/234.57a23096.js"><link rel="prefetch" href="/blog_publish/assets/js/235.c13c4937.js"><link rel="prefetch" href="/blog_publish/assets/js/236.b568db8e.js"><link rel="prefetch" href="/blog_publish/assets/js/237.3aae69e2.js"><link rel="prefetch" href="/blog_publish/assets/js/238.0f61a1dc.js"><link rel="prefetch" href="/blog_publish/assets/js/239.316aa729.js"><link rel="prefetch" href="/blog_publish/assets/js/24.ad4747b7.js"><link rel="prefetch" href="/blog_publish/assets/js/240.208e3d1d.js"><link rel="prefetch" href="/blog_publish/assets/js/241.cc5f0d19.js"><link rel="prefetch" href="/blog_publish/assets/js/242.bf836af1.js"><link rel="prefetch" href="/blog_publish/assets/js/243.e08c14ce.js"><link rel="prefetch" href="/blog_publish/assets/js/244.68fd01ec.js"><link rel="prefetch" href="/blog_publish/assets/js/245.353baab6.js"><link rel="prefetch" href="/blog_publish/assets/js/246.80694f75.js"><link rel="prefetch" href="/blog_publish/assets/js/247.da06e154.js"><link rel="prefetch" href="/blog_publish/assets/js/248.dd3f11d7.js"><link rel="prefetch" href="/blog_publish/assets/js/249.4a6ea1ef.js"><link rel="prefetch" href="/blog_publish/assets/js/25.69179f9b.js"><link rel="prefetch" href="/blog_publish/assets/js/250.30fd4b86.js"><link rel="prefetch" href="/blog_publish/assets/js/251.aee63f40.js"><link rel="prefetch" href="/blog_publish/assets/js/252.8267f85b.js"><link rel="prefetch" href="/blog_publish/assets/js/253.03545d18.js"><link rel="prefetch" href="/blog_publish/assets/js/254.561f4f4b.js"><link rel="prefetch" href="/blog_publish/assets/js/255.f4af0159.js"><link rel="prefetch" href="/blog_publish/assets/js/256.2bca660d.js"><link rel="prefetch" href="/blog_publish/assets/js/257.fdddaac9.js"><link rel="prefetch" href="/blog_publish/assets/js/258.5eefff7d.js"><link rel="prefetch" href="/blog_publish/assets/js/259.55ab8808.js"><link rel="prefetch" href="/blog_publish/assets/js/26.ee90eb7b.js"><link rel="prefetch" href="/blog_publish/assets/js/260.1ed568e4.js"><link rel="prefetch" href="/blog_publish/assets/js/261.bb888ff6.js"><link rel="prefetch" href="/blog_publish/assets/js/262.843e3bda.js"><link rel="prefetch" href="/blog_publish/assets/js/263.a7a73dbd.js"><link rel="prefetch" href="/blog_publish/assets/js/264.c51f049e.js"><link rel="prefetch" href="/blog_publish/assets/js/265.f67aa90c.js"><link rel="prefetch" href="/blog_publish/assets/js/266.8e0ea3c8.js"><link rel="prefetch" href="/blog_publish/assets/js/267.4fc78063.js"><link rel="prefetch" href="/blog_publish/assets/js/268.c525794a.js"><link rel="prefetch" href="/blog_publish/assets/js/269.19cdfdc7.js"><link rel="prefetch" href="/blog_publish/assets/js/27.c6f599d8.js"><link rel="prefetch" href="/blog_publish/assets/js/270.fb0ab094.js"><link rel="prefetch" href="/blog_publish/assets/js/271.467a82f1.js"><link rel="prefetch" href="/blog_publish/assets/js/272.0de27920.js"><link rel="prefetch" href="/blog_publish/assets/js/273.d8977f33.js"><link rel="prefetch" href="/blog_publish/assets/js/274.2ebbf345.js"><link rel="prefetch" href="/blog_publish/assets/js/275.58fd1634.js"><link rel="prefetch" href="/blog_publish/assets/js/276.2ebbe3a9.js"><link rel="prefetch" href="/blog_publish/assets/js/277.9fea6e02.js"><link rel="prefetch" href="/blog_publish/assets/js/278.0c29ee61.js"><link rel="prefetch" href="/blog_publish/assets/js/279.93627701.js"><link rel="prefetch" href="/blog_publish/assets/js/28.7ff86ce7.js"><link rel="prefetch" href="/blog_publish/assets/js/280.00b85860.js"><link rel="prefetch" href="/blog_publish/assets/js/281.14a33ba7.js"><link rel="prefetch" href="/blog_publish/assets/js/282.71261c14.js"><link rel="prefetch" href="/blog_publish/assets/js/283.30586c87.js"><link rel="prefetch" href="/blog_publish/assets/js/284.7cf15db2.js"><link rel="prefetch" href="/blog_publish/assets/js/285.3eafbfe4.js"><link rel="prefetch" href="/blog_publish/assets/js/286.b60a4f05.js"><link rel="prefetch" href="/blog_publish/assets/js/287.3733f0b8.js"><link rel="prefetch" href="/blog_publish/assets/js/288.202714b9.js"><link rel="prefetch" href="/blog_publish/assets/js/289.e9a5644f.js"><link rel="prefetch" href="/blog_publish/assets/js/29.bdca0dd4.js"><link rel="prefetch" href="/blog_publish/assets/js/290.8b2c1967.js"><link rel="prefetch" href="/blog_publish/assets/js/291.d27915a6.js"><link rel="prefetch" href="/blog_publish/assets/js/292.75910447.js"><link rel="prefetch" href="/blog_publish/assets/js/293.b65ee8e6.js"><link rel="prefetch" href="/blog_publish/assets/js/294.077417b9.js"><link rel="prefetch" href="/blog_publish/assets/js/295.08fd6ab5.js"><link rel="prefetch" href="/blog_publish/assets/js/296.36fd6058.js"><link rel="prefetch" href="/blog_publish/assets/js/297.d18929be.js"><link rel="prefetch" href="/blog_publish/assets/js/298.b98780dc.js"><link rel="prefetch" href="/blog_publish/assets/js/299.915f2592.js"><link rel="prefetch" href="/blog_publish/assets/js/3.7b5be556.js"><link rel="prefetch" href="/blog_publish/assets/js/30.bef2a207.js"><link rel="prefetch" href="/blog_publish/assets/js/300.e152ebfe.js"><link rel="prefetch" href="/blog_publish/assets/js/301.82dcc1dd.js"><link rel="prefetch" href="/blog_publish/assets/js/302.c017782d.js"><link rel="prefetch" href="/blog_publish/assets/js/303.06ddb101.js"><link rel="prefetch" href="/blog_publish/assets/js/304.7748c95d.js"><link rel="prefetch" href="/blog_publish/assets/js/305.edb1c20b.js"><link rel="prefetch" href="/blog_publish/assets/js/306.8b396e71.js"><link rel="prefetch" href="/blog_publish/assets/js/307.3f107a74.js"><link rel="prefetch" href="/blog_publish/assets/js/308.cb35816a.js"><link rel="prefetch" href="/blog_publish/assets/js/309.0cd1649b.js"><link rel="prefetch" href="/blog_publish/assets/js/31.7b7977b4.js"><link rel="prefetch" href="/blog_publish/assets/js/310.ec99eb92.js"><link rel="prefetch" href="/blog_publish/assets/js/311.448c526d.js"><link rel="prefetch" href="/blog_publish/assets/js/312.4f818283.js"><link rel="prefetch" href="/blog_publish/assets/js/313.d6792b5b.js"><link rel="prefetch" href="/blog_publish/assets/js/314.11890458.js"><link rel="prefetch" href="/blog_publish/assets/js/315.2dc37424.js"><link rel="prefetch" href="/blog_publish/assets/js/316.ea3c53b3.js"><link rel="prefetch" href="/blog_publish/assets/js/317.ff77f3fa.js"><link rel="prefetch" href="/blog_publish/assets/js/318.f24ed4c3.js"><link rel="prefetch" href="/blog_publish/assets/js/319.5b448c84.js"><link rel="prefetch" href="/blog_publish/assets/js/32.55741b61.js"><link rel="prefetch" href="/blog_publish/assets/js/320.1a4b2943.js"><link rel="prefetch" href="/blog_publish/assets/js/321.4ef7720d.js"><link rel="prefetch" href="/blog_publish/assets/js/322.2c1fad10.js"><link rel="prefetch" href="/blog_publish/assets/js/323.7c5b4f60.js"><link rel="prefetch" href="/blog_publish/assets/js/324.b816a72c.js"><link rel="prefetch" href="/blog_publish/assets/js/325.82ed63ea.js"><link rel="prefetch" href="/blog_publish/assets/js/326.b3fda4fe.js"><link rel="prefetch" href="/blog_publish/assets/js/327.512f5b91.js"><link rel="prefetch" href="/blog_publish/assets/js/328.d0ba8c77.js"><link rel="prefetch" href="/blog_publish/assets/js/329.590e8a68.js"><link rel="prefetch" href="/blog_publish/assets/js/33.0eeacbf9.js"><link rel="prefetch" href="/blog_publish/assets/js/330.66d5364e.js"><link rel="prefetch" href="/blog_publish/assets/js/331.a68b23ae.js"><link rel="prefetch" href="/blog_publish/assets/js/332.7ed10394.js"><link rel="prefetch" href="/blog_publish/assets/js/333.42fd8b0e.js"><link rel="prefetch" href="/blog_publish/assets/js/334.42209c65.js"><link rel="prefetch" href="/blog_publish/assets/js/335.d157b771.js"><link rel="prefetch" href="/blog_publish/assets/js/336.ca745548.js"><link rel="prefetch" href="/blog_publish/assets/js/337.9376d7cf.js"><link rel="prefetch" href="/blog_publish/assets/js/338.1ebb1595.js"><link rel="prefetch" href="/blog_publish/assets/js/339.32e4638a.js"><link rel="prefetch" href="/blog_publish/assets/js/34.67310adf.js"><link rel="prefetch" href="/blog_publish/assets/js/340.2596eb43.js"><link rel="prefetch" href="/blog_publish/assets/js/341.c4ed67ea.js"><link rel="prefetch" href="/blog_publish/assets/js/342.eff34e1d.js"><link rel="prefetch" href="/blog_publish/assets/js/343.ad637711.js"><link rel="prefetch" href="/blog_publish/assets/js/344.65071626.js"><link rel="prefetch" href="/blog_publish/assets/js/345.927da791.js"><link rel="prefetch" href="/blog_publish/assets/js/346.0063c290.js"><link rel="prefetch" href="/blog_publish/assets/js/347.7a2c088d.js"><link rel="prefetch" href="/blog_publish/assets/js/348.3181b6bf.js"><link rel="prefetch" href="/blog_publish/assets/js/349.3aa7e89a.js"><link rel="prefetch" href="/blog_publish/assets/js/35.ecfbe002.js"><link rel="prefetch" href="/blog_publish/assets/js/350.cda83483.js"><link rel="prefetch" href="/blog_publish/assets/js/351.e0b1ef0b.js"><link rel="prefetch" href="/blog_publish/assets/js/352.7bb57ddd.js"><link rel="prefetch" href="/blog_publish/assets/js/353.5d004f30.js"><link rel="prefetch" href="/blog_publish/assets/js/354.eb487b10.js"><link rel="prefetch" href="/blog_publish/assets/js/355.2b851a70.js"><link rel="prefetch" href="/blog_publish/assets/js/356.f36ca631.js"><link rel="prefetch" href="/blog_publish/assets/js/357.f8db166b.js"><link rel="prefetch" href="/blog_publish/assets/js/358.695e4c0b.js"><link rel="prefetch" href="/blog_publish/assets/js/359.aa53f936.js"><link rel="prefetch" href="/blog_publish/assets/js/36.489ae5f5.js"><link rel="prefetch" href="/blog_publish/assets/js/360.9afbc4fa.js"><link rel="prefetch" href="/blog_publish/assets/js/361.91536286.js"><link rel="prefetch" href="/blog_publish/assets/js/362.c9cb95d5.js"><link rel="prefetch" href="/blog_publish/assets/js/363.77d02e4f.js"><link rel="prefetch" href="/blog_publish/assets/js/364.534109a9.js"><link rel="prefetch" href="/blog_publish/assets/js/365.f5356ddd.js"><link rel="prefetch" href="/blog_publish/assets/js/366.6a8b5580.js"><link rel="prefetch" href="/blog_publish/assets/js/367.061df673.js"><link rel="prefetch" href="/blog_publish/assets/js/368.79f1d531.js"><link rel="prefetch" href="/blog_publish/assets/js/369.308364c5.js"><link rel="prefetch" href="/blog_publish/assets/js/37.94c4909a.js"><link rel="prefetch" href="/blog_publish/assets/js/370.82441c68.js"><link rel="prefetch" href="/blog_publish/assets/js/371.e728c9b1.js"><link rel="prefetch" href="/blog_publish/assets/js/372.4112bc48.js"><link rel="prefetch" href="/blog_publish/assets/js/373.112afcdc.js"><link rel="prefetch" href="/blog_publish/assets/js/374.fb9e8f96.js"><link rel="prefetch" href="/blog_publish/assets/js/38.4e3b4f91.js"><link rel="prefetch" href="/blog_publish/assets/js/39.15663405.js"><link rel="prefetch" href="/blog_publish/assets/js/4.b0cb765d.js"><link rel="prefetch" href="/blog_publish/assets/js/40.d52c1c17.js"><link rel="prefetch" href="/blog_publish/assets/js/41.e9fc1411.js"><link rel="prefetch" href="/blog_publish/assets/js/42.703a40d4.js"><link rel="prefetch" href="/blog_publish/assets/js/43.1e1b61ef.js"><link rel="prefetch" href="/blog_publish/assets/js/44.e0fd4b34.js"><link rel="prefetch" href="/blog_publish/assets/js/45.01f8140d.js"><link rel="prefetch" href="/blog_publish/assets/js/46.3db58dc9.js"><link rel="prefetch" href="/blog_publish/assets/js/47.1a477269.js"><link rel="prefetch" href="/blog_publish/assets/js/48.a1b87d68.js"><link rel="prefetch" href="/blog_publish/assets/js/49.18580c78.js"><link rel="prefetch" href="/blog_publish/assets/js/5.e723c1a9.js"><link rel="prefetch" href="/blog_publish/assets/js/50.d87b0611.js"><link rel="prefetch" href="/blog_publish/assets/js/51.50baa302.js"><link rel="prefetch" href="/blog_publish/assets/js/52.ab9331d2.js"><link rel="prefetch" href="/blog_publish/assets/js/53.2f94ef0e.js"><link rel="prefetch" href="/blog_publish/assets/js/54.06dccf04.js"><link rel="prefetch" href="/blog_publish/assets/js/55.10eee97c.js"><link rel="prefetch" href="/blog_publish/assets/js/56.494e1260.js"><link rel="prefetch" href="/blog_publish/assets/js/57.71a0db8e.js"><link rel="prefetch" href="/blog_publish/assets/js/58.342d438e.js"><link rel="prefetch" href="/blog_publish/assets/js/59.606ea721.js"><link rel="prefetch" href="/blog_publish/assets/js/6.43debd78.js"><link rel="prefetch" href="/blog_publish/assets/js/60.da0594f7.js"><link rel="prefetch" href="/blog_publish/assets/js/61.76ba61eb.js"><link rel="prefetch" href="/blog_publish/assets/js/62.1e989829.js"><link rel="prefetch" href="/blog_publish/assets/js/63.6ce1cb12.js"><link rel="prefetch" href="/blog_publish/assets/js/64.50f56632.js"><link rel="prefetch" href="/blog_publish/assets/js/65.f85ed5fa.js"><link rel="prefetch" href="/blog_publish/assets/js/66.deb1a5c1.js"><link rel="prefetch" href="/blog_publish/assets/js/67.27967045.js"><link rel="prefetch" href="/blog_publish/assets/js/68.69d976e5.js"><link rel="prefetch" href="/blog_publish/assets/js/69.bbddef12.js"><link rel="prefetch" href="/blog_publish/assets/js/7.23b88edf.js"><link rel="prefetch" href="/blog_publish/assets/js/70.7c2cda55.js"><link rel="prefetch" href="/blog_publish/assets/js/71.85d87299.js"><link rel="prefetch" href="/blog_publish/assets/js/72.b8d96a0a.js"><link rel="prefetch" href="/blog_publish/assets/js/73.7501ab23.js"><link rel="prefetch" href="/blog_publish/assets/js/74.2b44d8fe.js"><link rel="prefetch" href="/blog_publish/assets/js/75.7353b526.js"><link rel="prefetch" href="/blog_publish/assets/js/77.e7255570.js"><link rel="prefetch" href="/blog_publish/assets/js/78.88a5f7b0.js"><link rel="prefetch" href="/blog_publish/assets/js/79.45455d19.js"><link rel="prefetch" href="/blog_publish/assets/js/8.786386d2.js"><link rel="prefetch" href="/blog_publish/assets/js/80.dc6432c6.js"><link rel="prefetch" href="/blog_publish/assets/js/81.8af4b91e.js"><link rel="prefetch" href="/blog_publish/assets/js/82.27278353.js"><link rel="prefetch" href="/blog_publish/assets/js/83.d35870e8.js"><link rel="prefetch" href="/blog_publish/assets/js/84.e641a3b2.js"><link rel="prefetch" href="/blog_publish/assets/js/85.a8525065.js"><link rel="prefetch" href="/blog_publish/assets/js/86.532a9665.js"><link rel="prefetch" href="/blog_publish/assets/js/87.b2cc7e3f.js"><link rel="prefetch" href="/blog_publish/assets/js/88.4cc0809a.js"><link rel="prefetch" href="/blog_publish/assets/js/89.cd89102c.js"><link rel="prefetch" href="/blog_publish/assets/js/9.644723e0.js"><link rel="prefetch" href="/blog_publish/assets/js/90.1993f13e.js"><link rel="prefetch" href="/blog_publish/assets/js/91.800cce9f.js"><link rel="prefetch" href="/blog_publish/assets/js/92.3f0ea026.js"><link rel="prefetch" href="/blog_publish/assets/js/93.ada8c009.js"><link rel="prefetch" href="/blog_publish/assets/js/94.e198460f.js"><link rel="prefetch" href="/blog_publish/assets/js/95.966d07cf.js"><link rel="prefetch" href="/blog_publish/assets/js/96.a68dd3b6.js"><link rel="prefetch" href="/blog_publish/assets/js/97.0382e693.js"><link rel="prefetch" href="/blog_publish/assets/js/98.3a9337a5.js"><link rel="prefetch" href="/blog_publish/assets/js/99.5631874c.js">
    <link rel="stylesheet" href="/blog_publish/assets/css/0.styles.9a82886c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_publish/" class="home-link router-link-active"><!----> <span class="site-name">小游</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>编程基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/01_Java8新特性.html" class="sidebar-link">java8新特性</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/02_Java集合.html" class="sidebar-link">Java 集合</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/03_反射.html" class="sidebar-link">反射</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/IO/01_BIO.html" class="sidebar-link">Java-BIO</a></li><li><a href="/blog_publish/java/01_ProgrammingBasic/01_JavaLanguage/01_LanguageBasic/IO/02_NIO.html" class="sidebar-link">Java-NIO</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>多线程&amp;高并发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JDK_Tools</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="locksupport与线程中断"><a href="#locksupport与线程中断" class="header-anchor">#</a> LockSupport与线程中断</h1> <h2 id="一、线程中断"><a href="#一、线程中断" class="header-anchor">#</a> 一、线程中断</h2> <p>面试题：如何理解下面三个API</p> <p><a data-fancybox="" title="image-20210411220513433" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/e4f46a453cec46d5861c1fd142d9ab7a.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/e4f46a453cec46d5861c1fd142d9ab7a.png" alt="image-20210411220513433"></a></p> <p>如何停止、中断一个运行中的线程？？</p> <h3 id="_1-1-什么是中断"><a href="#_1-1-什么是中断" class="header-anchor">#</a> 1.1 什么是中断</h3> <p><strong>首先</strong> <strong>一个线程不应该由其他线程来强制中断或停止，而是应该由线程自己自行停止</strong>。所以，Thread.stop, Thread.suspend, Thread.resume 都已经被废弃了。</p> <p><strong>其次</strong>
在Java中没有办法立即停止一条线程，然而停止线程却显得尤为重要，如取消一个耗时操作。
因此，<strong>Java提供了一种用于停止线程的机制——中断</strong>。</p> <p><strong>中断只是一种协作机制</strong>，<strong>Java没有给中断增加任何语法，中断的过程完全需要程序员自己实现</strong>。
若要中断一个线程，你需要手动调用该线程的interrupt方法，该方法也仅仅是<strong>将线程对象的中断标识设成true</strong>；
接着你需要自己写代码不断地检测当前线程的标识位，如果为true，表示别的线程要求这条线程中断，此时究竟该做什么需要你自己写代码实现。</p> <p><strong>每个线程对象中都有一个标识，用于表示线程是否被中断</strong>；该标识位为true表示中断，为false表示未中断；通过调用线程对象的<code>interrupt</code>方法将该线程的标识位设为true；可以在别的线程中调用，也可以在自己的线程中调用。</p> <h3 id="_1-2-中断相关的api"><a href="#_1-2-中断相关的api" class="header-anchor">#</a> 1.2 中断相关的API</h3> <p><a data-fancybox="" title="image-20210411220950039" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/db9ca9d116284998834ebb2071747dbc.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/db9ca9d116284998834ebb2071747dbc.png" alt="image-20210411220950039"></a></p> <p><a data-fancybox="" title="image-20210411220959648" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/63cc8bc6964441328625f3942ecf43a7.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/63cc8bc6964441328625f3942ecf43a7.png" alt="image-20210411220959648"></a></p> <h3 id="_1-3-如何使用中断标识停止线程"><a href="#_1-3-如何使用中断标识停止线程" class="header-anchor">#</a> 1.3 如何使用中断标识停止线程</h3> <p>在需要中断的线程中不断监听中断状态，一旦发生中断，就执行相应的中断处理业务逻辑。</p> <ol><li>修改中断状态</li> <li>停止线程</li></ol> <p><strong>使用Volatile变量实现</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用AtomicBoolean实现</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

        <span class="token class-name">AtomicBoolean</span> atomicBoolean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicBoolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>atomicBoolean<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> atomicBoolean<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用Thread类中的API实现</strong></p> <p><strong>API</strong></p> <p><a data-fancybox="" title="image-20210411231532342" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/3ad4c513b11842d181212d7a1917bcfc.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/3ad4c513b11842d181212d7a1917bcfc.png" alt="image-20210411231532342"></a></p> <p><a data-fancybox="" title="image-20210411231543183" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/13009dcdc035438f84e199043ef2202b.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/13009dcdc035438f84e199043ef2202b.png" alt="image-20210411231543183"></a></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Boolean</span><span class="token punctuation">.</span>TRUE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正在运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>thread<span class="token operator">::</span><span class="token function">interrupt</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-4-当前线程的中断标识为true，是不是就立刻停止"><a href="#_1-4-当前线程的中断标识为true，是不是就立刻停止" class="header-anchor">#</a> 1.4 当前线程的中断标识为true，是不是就立刻停止</h3> <p>具体来说，当对一个线程，调用<code>interrupt()</code> 时：</p> <ol><li><p>如果线程处于正常活动状态，那么会将该线程的中断标志设置为 true，仅此而已。
<strong>被设置中断标志的线程将继续正常运行</strong>，不受影响。所以， interrupt() 并不能真正的中断线程，需要被调用的线程自己进行配合才行。</p></li> <li><p>如果线程处于被阻塞状态（例如处于sleep, wait, join 等状态），在别的线程中调用当前线程对象的interrupt方法，<strong>那么线程将立即退出被阻塞状态，并抛出一个InterruptedException异常</strong>。</p></li></ol> <p><strong>线程处于正常活动状态，将中断标识设置为true，现场会继续运行</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 线程执行到此处时，当前线程的中断标识已经被设置为true</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2、线程中断状态：&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// thread线程刚刚启动，所以中断标识为false</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 虽然thread线程的中断标识已经被设置为true，但是thread1并没有被中断</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// thread线程已经停止，所以中断标识为false</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5、线程中断状态：&quot;</span> <span class="token operator">+</span> thread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>线程处于阻塞状态，将中断标识设置为true，线程会抛出异常，并将中断标识设置为false</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正常运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于线程的中断标识在抛出异常后被清除（设置为false），所以线程不会中断，会继续运行</p> <p><a data-fancybox="" title="image-20210411233506243" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/6111e2477f85457f8a8234311fc65b9d.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/6111e2477f85457f8a8234311fc65b9d.png" alt="image-20210411233506243"></a></p> <p><strong>中断线程</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;线程正常运行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在线程进入阻塞状态后，调用线程中断方法，线程会抛出异常，并将中断标识设置为false，因此线程会继续运行。<strong>为了停止线程，需要在catch块中再次调用线程中断方法。</strong></p> <p><a data-fancybox="" title="image-20210411233638182" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/da8bfd6f59f2480280d24bca6589e4ed.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/da8bfd6f59f2480280d24bca6589e4ed.png" alt="image-20210411233638182"></a></p> <p><strong>结论：中断只是一种协同机制，仅修改终端标识位而已，不会立刻</strong></p> <h3 id="_1-5-静态方法thread-interrupted"><a href="#_1-5-静态方法thread-interrupted" class="header-anchor">#</a> 1.5 静态方法<code>Thread.interrupted()</code></h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadInterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;111111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;222222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;---&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">interrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a data-fancybox="" title="image-20210411234312009" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/7eca0d77e3104d21855a6c89449ab0f3.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/7eca0d77e3104d21855a6c89449ab0f3.png" alt="image-20210411234312009"></a></p> <p><strong>说明：</strong></p> <p><a data-fancybox="" title="image-20210411234332934" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/098a85d503e04a9d8461c69b9af03596.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/098a85d503e04a9d8461c69b9af03596.png" alt="image-20210411234332934"></a></p> <p><a data-fancybox="" title="image-20210411234343071" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/9c229d9e10bc47308603905de97b2592.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/9c229d9e10bc47308603905de97b2592.png" alt="image-20210411234343071"></a></p> <p><strong>实例方法<code>isInterrupted</code>与静态方法<code>interrupted</code>对比</strong></p> <p><a data-fancybox="" title="image-20210411234504973" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/f7688773d3be49318013cfddea7913ae.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/f7688773d3be49318013cfddea7913ae.png" alt="image-20210411234504973"></a></p> <p><strong>实例方法：</strong></p> <p><a data-fancybox="" title="image-20210411234533002" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/fe90aed83bba447b88f2f67a6dfea589.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/fe90aed83bba447b88f2f67a6dfea589.png" alt="image-20210411234533002"></a></p> <p><strong>静态方法：</strong></p> <p><a data-fancybox="" title="image-20210411234521063" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/ae3fb6b6af6f47c18782a55579c4ff14.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/ae3fb6b6af6f47c18782a55579c4ff14.png" alt="image-20210411234521063"></a></p> <p><strong>结论：</strong></p> <p>这两个方法底层都是调用了一个本地方法：</p> <p><a data-fancybox="" title="image-20210411234638683" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/2eba2bdfff694ab985b2c832bb1c6ad2.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-11/2eba2bdfff694ab985b2c832bb1c6ad2.png" alt="image-20210411234638683"></a></p> <p><strong>区别：</strong></p> <ol><li><p>静态方法interrupted将       会清除中断状态（传入的参数ClearInterrupted为true），</p></li> <li><p>实例方法isInterrupted则不会（传入的参数ClearInterrupted为false）。</p></li></ol> <h3 id="_1-6-总结"><a href="#_1-6-总结" class="header-anchor">#</a> 1.6 总结</h3> <p>线程中断相关的方法：</p> <ul><li><p><strong>interrupt()方法是一个实例方法</strong>
它通知目标线程中断，也就是设置目标线程的中断标志位为true，中断标志位表示当前线程已经被中断了。</p></li> <li><p><strong>isInterrupted()方法也是一个实例方法</strong>
它判断当前线程是否被中断（通过检查中断标志位）并获取中断标志</p></li> <li><p><strong>Thread类的静态方法interrupted()</strong>
返回当前线程的中断状态(boolean类型)且将当前线程的中断状态设为false，此方法调用之后会清除当前线程的中断标志位的状态（将中断标志置为false了），返回当前值并清零置false</p></li></ul> <h2 id="二、线程等待唤醒机制"><a href="#二、线程等待唤醒机制" class="header-anchor">#</a> 二、线程等待唤醒机制</h2> <h3 id="_2-1-三种让线程等待与唤醒的方式"><a href="#_2-1-三种让线程等待与唤醒的方式" class="header-anchor">#</a> 2.1 三种让线程等待与唤醒的方式</h3> <ol><li>使用Object类中的wait方法让线程等待；使用Object类中的notify唤醒线程</li> <li>使用Condition类中的await方法让线程等待；使用Condition类中的signal方法唤醒线程</li> <li>使用LockSupport类中的park方法让线程等待，使用LockSupport类中的unpark方法唤醒线程</li></ol> <h3 id="_2-2-object类中的wait和notify"><a href="#_2-2-object类中的wait和notify" class="header-anchor">#</a> 2.2 Object类中的wait和notify</h3> <p><strong>wait方法与notify方法必须在Synchronized锁定区域使用，否则会出现以下异常</strong></p> <p><a data-fancybox="" title="image-20210412211440395" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/707f002f2d6b458682827fb60fba4db4.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/707f002f2d6b458682827fb60fba4db4.png" alt="image-20210412211440395"></a></p> <p><strong>wait与notify需要成对出现，wait必须在notify之前执行，否则程序会被阻塞</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WaitNotifyDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Object</span> objectLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>objectLock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; is coming&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; wait &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    objectLock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; notify &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>objectLock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                objectLock<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; 发出通知，唤醒线程&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3-condition中的await与signal"><a href="#_2-3-condition中的await与signal" class="header-anchor">#</a> 2.3 Condition中的await与signal</h3> <p><strong>await方法与signal方法需要在lock锁定区域使用，否则会出现以下异常</strong></p> <p><a data-fancybox="" title="image-20210412212257148" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/84edada3350648108428e4ebac7ae286.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-12/84edada3350648108428e4ebac7ae286.png" alt="image-20210412212257148"></a></p> <p><strong>await与signal需要成对使用，await需要先于signal执行，否则线程会被阻塞</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">Condition</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">Lock</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">ReentrantLock</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AwaitSignalDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Condition</span> condition <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">newCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; come&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                condition<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; await&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; signal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                condition<span class="token punctuation">.</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-4-object和condition使用的限制条件"><a href="#_2-4-object和condition使用的限制条件" class="header-anchor">#</a> 2.4 Object和Condition使用的限制条件</h3> <p><strong>线程需要先持有锁，必须在Synchronized或Lock锁定区域。必须先等待后唤醒</strong></p> <h3 id="_2-5-locksupport类中的park与unpark"><a href="#_2-5-locksupport类中的park与unpark" class="header-anchor">#</a> 2.5 LockSupport类中的park与unpark</h3> <p>LockSupport是用来创建锁和其他同步类的基本线程阻塞原语。</p> <p>park与unpark方法能够实现线程的阻塞与唤醒操作。<strong>LockSupport类使用了一种名为<code>Permit</code>（许可）的概念来做到阻塞和唤醒线程的功能</strong>， <strong>每个线程都有一个许可(permit)，permit只有两个值1和零，默认是零</strong>。可以把许可看成是一种(0,1)信号量（Semaphore），但与 Semaphore 不同的是，<strong>许可的累加上限是1</strong>。</p> <ul><li><p>park：<code>LockSupport.park()</code>，让当前线程进入阻塞状态</p></li> <li><p>unpark：<code>LockSupport.unpark(Thread thread)</code>，唤醒指定线程</p></li></ul> <p><strong>park与unpark执行没有顺序要求，可以先unpark，再park。</strong></p> <p><strong>park与unpark不需要在锁区域执行。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks</span><span class="token punctuation">.</span><span class="token class-name">LockSupport</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParkUnParkDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; come &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; park &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;thread1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MILLISECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; unPark &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LockSupport</span><span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>thread1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Thread2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog_publish/assets/js/app.4e527556.js" defer></script><script src="/blog_publish/assets/js/2.92f2819f.js" defer></script><script src="/blog_publish/assets/js/76.2f766dbd.js" defer></script>
  </body>
</html>
