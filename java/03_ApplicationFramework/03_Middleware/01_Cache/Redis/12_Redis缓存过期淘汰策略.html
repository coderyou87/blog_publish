<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis 缓存过期淘汰策略 | 小游</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon1" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-02-18/d687f535b564447e82a3178a4e9b2f8c.jpg">
    <link rel="icon2" href="https://you-blog.oss-cn-shenzhen.aliyuncs.com/typora/2021-02-18/icon.jpg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="知行合一">
    <link rel="preload" href="/blog_publish/assets/css/0.styles.9a82886c.css" as="style"><link rel="preload" href="/blog_publish/assets/js/app.0b3e5da3.js" as="script"><link rel="preload" href="/blog_publish/assets/js/2.bedb11a8.js" as="script"><link rel="preload" href="/blog_publish/assets/js/159.7856f4d3.js" as="script"><link rel="prefetch" href="/blog_publish/assets/js/10.4a802d54.js"><link rel="prefetch" href="/blog_publish/assets/js/100.375012ae.js"><link rel="prefetch" href="/blog_publish/assets/js/101.94a8256d.js"><link rel="prefetch" href="/blog_publish/assets/js/102.5ebd81b5.js"><link rel="prefetch" href="/blog_publish/assets/js/103.22bd0026.js"><link rel="prefetch" href="/blog_publish/assets/js/104.7a6cef9f.js"><link rel="prefetch" href="/blog_publish/assets/js/105.8d8b6406.js"><link rel="prefetch" href="/blog_publish/assets/js/106.da271c71.js"><link rel="prefetch" href="/blog_publish/assets/js/107.e1dfb0dc.js"><link rel="prefetch" href="/blog_publish/assets/js/108.ae65dd3a.js"><link rel="prefetch" href="/blog_publish/assets/js/109.1166b4d5.js"><link rel="prefetch" href="/blog_publish/assets/js/11.87147769.js"><link rel="prefetch" href="/blog_publish/assets/js/110.38e7d702.js"><link rel="prefetch" href="/blog_publish/assets/js/111.6abdf3a2.js"><link rel="prefetch" href="/blog_publish/assets/js/112.c549d2fc.js"><link rel="prefetch" href="/blog_publish/assets/js/113.d19f9d6a.js"><link rel="prefetch" href="/blog_publish/assets/js/114.435403a2.js"><link rel="prefetch" href="/blog_publish/assets/js/115.6fddc9b2.js"><link rel="prefetch" href="/blog_publish/assets/js/116.7edf44b6.js"><link rel="prefetch" href="/blog_publish/assets/js/117.eac41842.js"><link rel="prefetch" href="/blog_publish/assets/js/118.454da22c.js"><link rel="prefetch" href="/blog_publish/assets/js/119.cd11fb54.js"><link rel="prefetch" href="/blog_publish/assets/js/12.80fe6866.js"><link rel="prefetch" href="/blog_publish/assets/js/120.33efc6ea.js"><link rel="prefetch" href="/blog_publish/assets/js/121.f4ffb24b.js"><link rel="prefetch" href="/blog_publish/assets/js/122.22872b27.js"><link rel="prefetch" href="/blog_publish/assets/js/123.4a1428e1.js"><link rel="prefetch" href="/blog_publish/assets/js/124.70a45b24.js"><link rel="prefetch" href="/blog_publish/assets/js/125.49f55198.js"><link rel="prefetch" href="/blog_publish/assets/js/126.e3f67130.js"><link rel="prefetch" href="/blog_publish/assets/js/127.31a35744.js"><link rel="prefetch" href="/blog_publish/assets/js/128.4889232a.js"><link rel="prefetch" href="/blog_publish/assets/js/129.634b68ab.js"><link rel="prefetch" href="/blog_publish/assets/js/13.e04208fe.js"><link rel="prefetch" href="/blog_publish/assets/js/130.cbcc0f74.js"><link rel="prefetch" href="/blog_publish/assets/js/131.4ad07594.js"><link rel="prefetch" href="/blog_publish/assets/js/132.710eeb76.js"><link rel="prefetch" href="/blog_publish/assets/js/133.f2afd3ae.js"><link rel="prefetch" href="/blog_publish/assets/js/134.6836b7ec.js"><link rel="prefetch" href="/blog_publish/assets/js/135.f0c0fc1b.js"><link rel="prefetch" href="/blog_publish/assets/js/136.5b7d8f9a.js"><link rel="prefetch" href="/blog_publish/assets/js/137.8187ddbb.js"><link rel="prefetch" href="/blog_publish/assets/js/138.fbc97fa4.js"><link rel="prefetch" href="/blog_publish/assets/js/139.83e1c921.js"><link rel="prefetch" href="/blog_publish/assets/js/14.5e1595e8.js"><link rel="prefetch" href="/blog_publish/assets/js/140.1bd6f72b.js"><link rel="prefetch" href="/blog_publish/assets/js/141.a9fa649f.js"><link rel="prefetch" href="/blog_publish/assets/js/142.459d3649.js"><link rel="prefetch" href="/blog_publish/assets/js/143.c2cc2320.js"><link rel="prefetch" href="/blog_publish/assets/js/144.7eeb6409.js"><link rel="prefetch" href="/blog_publish/assets/js/145.333b02d5.js"><link rel="prefetch" href="/blog_publish/assets/js/146.b96e9c62.js"><link rel="prefetch" href="/blog_publish/assets/js/147.2a4a89dc.js"><link rel="prefetch" href="/blog_publish/assets/js/148.9728e861.js"><link rel="prefetch" href="/blog_publish/assets/js/149.d5dd15aa.js"><link rel="prefetch" href="/blog_publish/assets/js/15.98bec53a.js"><link rel="prefetch" href="/blog_publish/assets/js/150.b12cbb60.js"><link rel="prefetch" href="/blog_publish/assets/js/151.363da5d4.js"><link rel="prefetch" href="/blog_publish/assets/js/152.3dd7867e.js"><link rel="prefetch" href="/blog_publish/assets/js/153.90825228.js"><link rel="prefetch" href="/blog_publish/assets/js/154.44a692b0.js"><link rel="prefetch" href="/blog_publish/assets/js/155.3996a488.js"><link rel="prefetch" href="/blog_publish/assets/js/156.1abb5dc6.js"><link rel="prefetch" href="/blog_publish/assets/js/157.0b80a31d.js"><link rel="prefetch" href="/blog_publish/assets/js/158.7513a2ea.js"><link rel="prefetch" href="/blog_publish/assets/js/16.3bffe623.js"><link rel="prefetch" href="/blog_publish/assets/js/160.35710196.js"><link rel="prefetch" href="/blog_publish/assets/js/161.1a9f1c5c.js"><link rel="prefetch" href="/blog_publish/assets/js/162.ffff0ad0.js"><link rel="prefetch" href="/blog_publish/assets/js/163.611bde3c.js"><link rel="prefetch" href="/blog_publish/assets/js/164.73932019.js"><link rel="prefetch" href="/blog_publish/assets/js/165.eff3365a.js"><link rel="prefetch" href="/blog_publish/assets/js/166.30a97548.js"><link rel="prefetch" href="/blog_publish/assets/js/167.97a49c84.js"><link rel="prefetch" href="/blog_publish/assets/js/168.b65ba18e.js"><link rel="prefetch" href="/blog_publish/assets/js/169.1f4ed2fe.js"><link rel="prefetch" href="/blog_publish/assets/js/17.acd4c6f7.js"><link rel="prefetch" href="/blog_publish/assets/js/170.847267e6.js"><link rel="prefetch" href="/blog_publish/assets/js/171.8a6f380b.js"><link rel="prefetch" href="/blog_publish/assets/js/172.3b1d10e5.js"><link rel="prefetch" href="/blog_publish/assets/js/173.7f727a7a.js"><link rel="prefetch" href="/blog_publish/assets/js/174.f5932b26.js"><link rel="prefetch" href="/blog_publish/assets/js/175.d76a9b98.js"><link rel="prefetch" href="/blog_publish/assets/js/176.7f1d9c93.js"><link rel="prefetch" href="/blog_publish/assets/js/177.e436ef4b.js"><link rel="prefetch" href="/blog_publish/assets/js/178.f4dd329b.js"><link rel="prefetch" href="/blog_publish/assets/js/179.b93bbb00.js"><link rel="prefetch" href="/blog_publish/assets/js/18.2e968951.js"><link rel="prefetch" href="/blog_publish/assets/js/180.059bfa61.js"><link rel="prefetch" href="/blog_publish/assets/js/181.e3adc6b7.js"><link rel="prefetch" href="/blog_publish/assets/js/182.62f6c2f6.js"><link rel="prefetch" href="/blog_publish/assets/js/183.6cda5b7b.js"><link rel="prefetch" href="/blog_publish/assets/js/184.eb17ac28.js"><link rel="prefetch" href="/blog_publish/assets/js/185.98fb56b4.js"><link rel="prefetch" href="/blog_publish/assets/js/186.a1845d29.js"><link rel="prefetch" href="/blog_publish/assets/js/187.78cbca41.js"><link rel="prefetch" href="/blog_publish/assets/js/188.456d5113.js"><link rel="prefetch" href="/blog_publish/assets/js/189.4256cf20.js"><link rel="prefetch" href="/blog_publish/assets/js/19.1ccb764e.js"><link rel="prefetch" href="/blog_publish/assets/js/190.ce61ae45.js"><link rel="prefetch" href="/blog_publish/assets/js/191.534fec64.js"><link rel="prefetch" href="/blog_publish/assets/js/192.248af7c4.js"><link rel="prefetch" href="/blog_publish/assets/js/193.a6519117.js"><link rel="prefetch" href="/blog_publish/assets/js/194.ef701d5d.js"><link rel="prefetch" href="/blog_publish/assets/js/195.8ad5d0fd.js"><link rel="prefetch" href="/blog_publish/assets/js/196.34296687.js"><link rel="prefetch" href="/blog_publish/assets/js/197.7decf974.js"><link rel="prefetch" href="/blog_publish/assets/js/198.b1971662.js"><link rel="prefetch" href="/blog_publish/assets/js/199.cf77b624.js"><link rel="prefetch" href="/blog_publish/assets/js/20.908900ef.js"><link rel="prefetch" href="/blog_publish/assets/js/200.19cd4f06.js"><link rel="prefetch" href="/blog_publish/assets/js/201.3557ccad.js"><link rel="prefetch" href="/blog_publish/assets/js/202.28cc5fb1.js"><link rel="prefetch" href="/blog_publish/assets/js/203.f748fbd0.js"><link rel="prefetch" href="/blog_publish/assets/js/204.59e52598.js"><link rel="prefetch" href="/blog_publish/assets/js/205.fb6452a8.js"><link rel="prefetch" href="/blog_publish/assets/js/206.092bda44.js"><link rel="prefetch" href="/blog_publish/assets/js/207.2b3caf3c.js"><link rel="prefetch" href="/blog_publish/assets/js/208.ce7fbb44.js"><link rel="prefetch" href="/blog_publish/assets/js/209.ea85e45c.js"><link rel="prefetch" href="/blog_publish/assets/js/21.c1d78566.js"><link rel="prefetch" href="/blog_publish/assets/js/210.5b7edde6.js"><link rel="prefetch" href="/blog_publish/assets/js/211.ada7fa3d.js"><link rel="prefetch" href="/blog_publish/assets/js/212.61a9f581.js"><link rel="prefetch" href="/blog_publish/assets/js/213.1b6025af.js"><link rel="prefetch" href="/blog_publish/assets/js/214.51624bf5.js"><link rel="prefetch" href="/blog_publish/assets/js/215.71b718b8.js"><link rel="prefetch" href="/blog_publish/assets/js/216.358ba805.js"><link rel="prefetch" href="/blog_publish/assets/js/217.478e8936.js"><link rel="prefetch" href="/blog_publish/assets/js/218.b1340804.js"><link rel="prefetch" href="/blog_publish/assets/js/219.505d6c90.js"><link rel="prefetch" href="/blog_publish/assets/js/22.d784ed62.js"><link rel="prefetch" href="/blog_publish/assets/js/220.6774afd2.js"><link rel="prefetch" href="/blog_publish/assets/js/221.5541fc3e.js"><link rel="prefetch" href="/blog_publish/assets/js/222.6ebbba39.js"><link rel="prefetch" href="/blog_publish/assets/js/223.960e47db.js"><link rel="prefetch" href="/blog_publish/assets/js/224.000e74cf.js"><link rel="prefetch" href="/blog_publish/assets/js/225.2dea3f9d.js"><link rel="prefetch" href="/blog_publish/assets/js/226.cb7d9695.js"><link rel="prefetch" href="/blog_publish/assets/js/227.80314a54.js"><link rel="prefetch" href="/blog_publish/assets/js/228.1bc14b0f.js"><link rel="prefetch" href="/blog_publish/assets/js/229.5b87e388.js"><link rel="prefetch" href="/blog_publish/assets/js/23.e53a62a3.js"><link rel="prefetch" href="/blog_publish/assets/js/230.d1892ebc.js"><link rel="prefetch" href="/blog_publish/assets/js/231.5c5517b1.js"><link rel="prefetch" href="/blog_publish/assets/js/232.c40d3047.js"><link rel="prefetch" href="/blog_publish/assets/js/233.71f9284e.js"><link rel="prefetch" href="/blog_publish/assets/js/234.336e1a83.js"><link rel="prefetch" href="/blog_publish/assets/js/235.5cfa5520.js"><link rel="prefetch" href="/blog_publish/assets/js/236.938049a8.js"><link rel="prefetch" href="/blog_publish/assets/js/237.04da59f4.js"><link rel="prefetch" href="/blog_publish/assets/js/238.42325b15.js"><link rel="prefetch" href="/blog_publish/assets/js/239.1fb1f52c.js"><link rel="prefetch" href="/blog_publish/assets/js/24.03c7173f.js"><link rel="prefetch" href="/blog_publish/assets/js/240.2261635a.js"><link rel="prefetch" href="/blog_publish/assets/js/241.c1d53179.js"><link rel="prefetch" href="/blog_publish/assets/js/242.765f9379.js"><link rel="prefetch" href="/blog_publish/assets/js/243.ec661244.js"><link rel="prefetch" href="/blog_publish/assets/js/244.8078f3da.js"><link rel="prefetch" href="/blog_publish/assets/js/245.ea8ff30c.js"><link rel="prefetch" href="/blog_publish/assets/js/246.f4cadee9.js"><link rel="prefetch" href="/blog_publish/assets/js/247.919ee297.js"><link rel="prefetch" href="/blog_publish/assets/js/248.2d0a8dcc.js"><link rel="prefetch" href="/blog_publish/assets/js/249.a76d2822.js"><link rel="prefetch" href="/blog_publish/assets/js/25.393144c6.js"><link rel="prefetch" href="/blog_publish/assets/js/250.c7f9c045.js"><link rel="prefetch" href="/blog_publish/assets/js/251.ee2db093.js"><link rel="prefetch" href="/blog_publish/assets/js/252.5a8a65cc.js"><link rel="prefetch" href="/blog_publish/assets/js/253.5084a551.js"><link rel="prefetch" href="/blog_publish/assets/js/254.6ac436db.js"><link rel="prefetch" href="/blog_publish/assets/js/255.eb60b843.js"><link rel="prefetch" href="/blog_publish/assets/js/256.a9bacc28.js"><link rel="prefetch" href="/blog_publish/assets/js/257.5ab97791.js"><link rel="prefetch" href="/blog_publish/assets/js/258.9db0fd72.js"><link rel="prefetch" href="/blog_publish/assets/js/259.9b164fcf.js"><link rel="prefetch" href="/blog_publish/assets/js/26.fcdec65f.js"><link rel="prefetch" href="/blog_publish/assets/js/260.ae8af7e9.js"><link rel="prefetch" href="/blog_publish/assets/js/261.d061edcd.js"><link rel="prefetch" href="/blog_publish/assets/js/262.05522985.js"><link rel="prefetch" href="/blog_publish/assets/js/263.c3b50922.js"><link rel="prefetch" href="/blog_publish/assets/js/264.f99fc12d.js"><link rel="prefetch" href="/blog_publish/assets/js/265.0f51abea.js"><link rel="prefetch" href="/blog_publish/assets/js/266.5ff557bc.js"><link rel="prefetch" href="/blog_publish/assets/js/267.8b99c9c1.js"><link rel="prefetch" href="/blog_publish/assets/js/268.cf414ea1.js"><link rel="prefetch" href="/blog_publish/assets/js/269.12d46422.js"><link rel="prefetch" href="/blog_publish/assets/js/27.ab3a1f33.js"><link rel="prefetch" href="/blog_publish/assets/js/270.02ba8bff.js"><link rel="prefetch" href="/blog_publish/assets/js/271.57773332.js"><link rel="prefetch" href="/blog_publish/assets/js/272.eee63657.js"><link rel="prefetch" href="/blog_publish/assets/js/273.6abe8785.js"><link rel="prefetch" href="/blog_publish/assets/js/274.581586b0.js"><link rel="prefetch" href="/blog_publish/assets/js/275.6c4b3689.js"><link rel="prefetch" href="/blog_publish/assets/js/276.f5a6a1a8.js"><link rel="prefetch" href="/blog_publish/assets/js/277.4388e980.js"><link rel="prefetch" href="/blog_publish/assets/js/278.f4c26131.js"><link rel="prefetch" href="/blog_publish/assets/js/279.4b90bbf6.js"><link rel="prefetch" href="/blog_publish/assets/js/28.3071e60b.js"><link rel="prefetch" href="/blog_publish/assets/js/280.c04e16e8.js"><link rel="prefetch" href="/blog_publish/assets/js/281.193741ce.js"><link rel="prefetch" href="/blog_publish/assets/js/282.9b33b030.js"><link rel="prefetch" href="/blog_publish/assets/js/283.76d20122.js"><link rel="prefetch" href="/blog_publish/assets/js/284.9897644d.js"><link rel="prefetch" href="/blog_publish/assets/js/285.c20abff2.js"><link rel="prefetch" href="/blog_publish/assets/js/286.e9791c07.js"><link rel="prefetch" href="/blog_publish/assets/js/287.ae090f29.js"><link rel="prefetch" href="/blog_publish/assets/js/288.4c408fad.js"><link rel="prefetch" href="/blog_publish/assets/js/289.6bdf87d1.js"><link rel="prefetch" href="/blog_publish/assets/js/29.8eff98e5.js"><link rel="prefetch" href="/blog_publish/assets/js/290.03e9979b.js"><link rel="prefetch" href="/blog_publish/assets/js/291.e2d6742f.js"><link rel="prefetch" href="/blog_publish/assets/js/292.d84576a9.js"><link rel="prefetch" href="/blog_publish/assets/js/293.dc4a7b37.js"><link rel="prefetch" href="/blog_publish/assets/js/294.90502b60.js"><link rel="prefetch" href="/blog_publish/assets/js/295.0120e1bd.js"><link rel="prefetch" href="/blog_publish/assets/js/296.c9e30318.js"><link rel="prefetch" href="/blog_publish/assets/js/297.62e851d9.js"><link rel="prefetch" href="/blog_publish/assets/js/298.29f24d25.js"><link rel="prefetch" href="/blog_publish/assets/js/299.466dedba.js"><link rel="prefetch" href="/blog_publish/assets/js/3.da89ce85.js"><link rel="prefetch" href="/blog_publish/assets/js/30.6234559a.js"><link rel="prefetch" href="/blog_publish/assets/js/300.c287553a.js"><link rel="prefetch" href="/blog_publish/assets/js/301.9afc0884.js"><link rel="prefetch" href="/blog_publish/assets/js/302.0d59e9d1.js"><link rel="prefetch" href="/blog_publish/assets/js/303.9cc5d38e.js"><link rel="prefetch" href="/blog_publish/assets/js/304.dd5f40dd.js"><link rel="prefetch" href="/blog_publish/assets/js/305.0fba4d7c.js"><link rel="prefetch" href="/blog_publish/assets/js/306.51b3a420.js"><link rel="prefetch" href="/blog_publish/assets/js/307.ef88c2f5.js"><link rel="prefetch" href="/blog_publish/assets/js/308.61ae54fc.js"><link rel="prefetch" href="/blog_publish/assets/js/309.efa023a9.js"><link rel="prefetch" href="/blog_publish/assets/js/31.c811a3fd.js"><link rel="prefetch" href="/blog_publish/assets/js/310.178c20ce.js"><link rel="prefetch" href="/blog_publish/assets/js/311.3a822977.js"><link rel="prefetch" href="/blog_publish/assets/js/312.49f53d3b.js"><link rel="prefetch" href="/blog_publish/assets/js/313.41aa3225.js"><link rel="prefetch" href="/blog_publish/assets/js/314.2213bdf7.js"><link rel="prefetch" href="/blog_publish/assets/js/315.ced1f80f.js"><link rel="prefetch" href="/blog_publish/assets/js/316.d1a8c782.js"><link rel="prefetch" href="/blog_publish/assets/js/317.0568164e.js"><link rel="prefetch" href="/blog_publish/assets/js/318.ebda6421.js"><link rel="prefetch" href="/blog_publish/assets/js/319.a5454ea8.js"><link rel="prefetch" href="/blog_publish/assets/js/32.d3f20f28.js"><link rel="prefetch" href="/blog_publish/assets/js/33.5e586558.js"><link rel="prefetch" href="/blog_publish/assets/js/34.1d6e96ba.js"><link rel="prefetch" href="/blog_publish/assets/js/35.a645fd58.js"><link rel="prefetch" href="/blog_publish/assets/js/36.be7d39bb.js"><link rel="prefetch" href="/blog_publish/assets/js/37.1164e484.js"><link rel="prefetch" href="/blog_publish/assets/js/38.310c359c.js"><link rel="prefetch" href="/blog_publish/assets/js/39.8281aa37.js"><link rel="prefetch" href="/blog_publish/assets/js/4.2f221ef2.js"><link rel="prefetch" href="/blog_publish/assets/js/40.3223b6ac.js"><link rel="prefetch" href="/blog_publish/assets/js/41.0e1882df.js"><link rel="prefetch" href="/blog_publish/assets/js/42.70e51a48.js"><link rel="prefetch" href="/blog_publish/assets/js/43.25aa2bdd.js"><link rel="prefetch" href="/blog_publish/assets/js/44.089f7cae.js"><link rel="prefetch" href="/blog_publish/assets/js/45.a76f903f.js"><link rel="prefetch" href="/blog_publish/assets/js/46.4874ac1b.js"><link rel="prefetch" href="/blog_publish/assets/js/47.7bc4a062.js"><link rel="prefetch" href="/blog_publish/assets/js/48.a8fdbab1.js"><link rel="prefetch" href="/blog_publish/assets/js/49.74367ea8.js"><link rel="prefetch" href="/blog_publish/assets/js/5.46cac9d5.js"><link rel="prefetch" href="/blog_publish/assets/js/50.a505412e.js"><link rel="prefetch" href="/blog_publish/assets/js/51.4d1bb27f.js"><link rel="prefetch" href="/blog_publish/assets/js/52.4e95fc9c.js"><link rel="prefetch" href="/blog_publish/assets/js/53.a0a203de.js"><link rel="prefetch" href="/blog_publish/assets/js/54.e06b845e.js"><link rel="prefetch" href="/blog_publish/assets/js/55.42d1ff22.js"><link rel="prefetch" href="/blog_publish/assets/js/56.46632776.js"><link rel="prefetch" href="/blog_publish/assets/js/57.1ba97aeb.js"><link rel="prefetch" href="/blog_publish/assets/js/58.abf37b24.js"><link rel="prefetch" href="/blog_publish/assets/js/59.a01caaea.js"><link rel="prefetch" href="/blog_publish/assets/js/6.6ba0b3b7.js"><link rel="prefetch" href="/blog_publish/assets/js/60.92bf4a0a.js"><link rel="prefetch" href="/blog_publish/assets/js/61.f5dc3e4e.js"><link rel="prefetch" href="/blog_publish/assets/js/62.0ef04956.js"><link rel="prefetch" href="/blog_publish/assets/js/63.03e553b7.js"><link rel="prefetch" href="/blog_publish/assets/js/64.9a45c838.js"><link rel="prefetch" href="/blog_publish/assets/js/65.ced60691.js"><link rel="prefetch" href="/blog_publish/assets/js/66.15dd4b4b.js"><link rel="prefetch" href="/blog_publish/assets/js/67.23476468.js"><link rel="prefetch" href="/blog_publish/assets/js/68.6f950adf.js"><link rel="prefetch" href="/blog_publish/assets/js/69.8c8befe3.js"><link rel="prefetch" href="/blog_publish/assets/js/7.d29987d1.js"><link rel="prefetch" href="/blog_publish/assets/js/70.466cec24.js"><link rel="prefetch" href="/blog_publish/assets/js/71.cfba865e.js"><link rel="prefetch" href="/blog_publish/assets/js/72.9a627db1.js"><link rel="prefetch" href="/blog_publish/assets/js/73.da1a780d.js"><link rel="prefetch" href="/blog_publish/assets/js/74.33bfabae.js"><link rel="prefetch" href="/blog_publish/assets/js/75.aee2d6cb.js"><link rel="prefetch" href="/blog_publish/assets/js/76.3797e838.js"><link rel="prefetch" href="/blog_publish/assets/js/77.ad11e151.js"><link rel="prefetch" href="/blog_publish/assets/js/78.af410ff3.js"><link rel="prefetch" href="/blog_publish/assets/js/79.8589febf.js"><link rel="prefetch" href="/blog_publish/assets/js/8.ad1210a9.js"><link rel="prefetch" href="/blog_publish/assets/js/80.ae0ca24c.js"><link rel="prefetch" href="/blog_publish/assets/js/81.5a3791ab.js"><link rel="prefetch" href="/blog_publish/assets/js/82.5ddc83cd.js"><link rel="prefetch" href="/blog_publish/assets/js/83.b4559200.js"><link rel="prefetch" href="/blog_publish/assets/js/84.3bca4476.js"><link rel="prefetch" href="/blog_publish/assets/js/85.50ce0e38.js"><link rel="prefetch" href="/blog_publish/assets/js/86.8f98fc4a.js"><link rel="prefetch" href="/blog_publish/assets/js/87.69d03dd9.js"><link rel="prefetch" href="/blog_publish/assets/js/88.23a63938.js"><link rel="prefetch" href="/blog_publish/assets/js/89.82186e32.js"><link rel="prefetch" href="/blog_publish/assets/js/9.1a4c05c0.js"><link rel="prefetch" href="/blog_publish/assets/js/90.223584c3.js"><link rel="prefetch" href="/blog_publish/assets/js/91.c9495912.js"><link rel="prefetch" href="/blog_publish/assets/js/92.9c66056f.js"><link rel="prefetch" href="/blog_publish/assets/js/93.7206c292.js"><link rel="prefetch" href="/blog_publish/assets/js/94.da3509d4.js"><link rel="prefetch" href="/blog_publish/assets/js/95.b6ed19d5.js"><link rel="prefetch" href="/blog_publish/assets/js/96.99299de8.js"><link rel="prefetch" href="/blog_publish/assets/js/97.6870b9f1.js"><link rel="prefetch" href="/blog_publish/assets/js/98.bb619a81.js"><link rel="prefetch" href="/blog_publish/assets/js/99.d91b8997.js">
    <link rel="stylesheet" href="/blog_publish/assets/css/0.styles.9a82886c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_publish/" class="home-link router-link-active"><!----> <span class="site-name">小游</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_publish/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/java/01_ProgrammingBasic/link.html" class="nav-link">
  编程基础
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/02_DevelopmentTools/link.html" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/03_ApplicationFramework/link.html" class="nav-link">
  应用框架
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/04_OperationAndMaintenance/" class="nav-link">
  运维
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/java/05_SourceCode/" class="nav-link">
  源码
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/web/01_vue/使用webpack打包一个简单的前端程序.html" class="nav-link">
  vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog_publish/tools/essay/04_SpringBoot中处理跨域的几种方式.html" class="nav-link">
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/installSoftware/01_jdk_linux.html" class="nav-link">
  软件安装
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/bugRepository/03_MySQL主从复制Bug.html" class="nav-link">
  bug库
</a></li><li class="dropdown-item"><!----> <a href="/blog_publish/tools/other/07_打包插件maven-assembly-plugin.html" class="nav-link">
  其他
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span></span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/01_Redis使用场景.html" class="sidebar-link">Redis</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/02_Redis安装部署.html" class="sidebar-link">Redis安装部署</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/03_Redis安装与配置.html" class="sidebar-link">Redis安装与配置</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/04_Redis常用配置.html" class="sidebar-link">Redis 配置文件</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/05_数据类型.html" class="sidebar-link">数据类型</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/06_StringTest.html" class="sidebar-link">StringTest</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/07_HashTest.html" class="sidebar-link">HashTest</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/08_ListTest.html" class="sidebar-link">ListTest</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/09_SetTest.html" class="sidebar-link">SetTest</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/10_SortedTest.html" class="sidebar-link">SortedTest</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/11_分布式锁.html" class="sidebar-link">分布式锁</a></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/12_Redis缓存过期淘汰策略.html" class="active sidebar-link">Redis 缓存过期淘汰策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/12_Redis缓存过期淘汰策略.html#一、redis内存" class="sidebar-link">一、Redis内存</a></li><li class="sidebar-sub-header"><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/12_Redis缓存过期淘汰策略.html#二、redis-内置的缓存淘汰策略" class="sidebar-link">二、Redis 内置的缓存淘汰策略</a></li><li class="sidebar-sub-header"><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/12_Redis缓存过期淘汰策略.html#三、redis-中删除key的策略：" class="sidebar-link">三、Redis 中删除key的策略：</a></li></ul></li><li><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/13_缓存失效带来的问题.html" class="sidebar-link">缓存失效带来的问题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redis-缓存过期淘汰策略"><a href="#redis-缓存过期淘汰策略" class="header-anchor">#</a> Redis 缓存过期淘汰策略</h1> <p>面试题：</p> <ol><li>生产上 Redis 的内存设置多大？</li> <li>如何配置、修改 Redis 的内存大小</li> <li>如果内存满了怎么办</li> <li>Redis 清理内存的方式，定期删除和惰性删除了解过吗</li> <li>Redis 缓存淘汰策略</li> <li>Redis 的 LRU 了解过吗，可否手写一个 LRU 算法’</li></ol> <h2 id="一、redis内存"><a href="#一、redis内存" class="header-anchor">#</a> 一、Redis内存</h2> <p>Redis 默认内存是多少？如何查看，如何修改。</p> <p>查看 Redis 默认内存（默认没有限制）</p> <p><a data-fancybox="" title="image-20201029224701345" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7cd5a41862444bb98a5b61be9fc902c9.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7cd5a41862444bb98a5b61be9fc902c9.png" alt="image-20201029224701345"></a></p> <p>如果不设置最大内存大小或者设置最大内存大小为 0，在 64 位操作系统下，不限制内存大小；在 32 位操作系统下，最多使用 3GB。</p> <p>maxmemory 的单位是字节</p> <p>一般生产上的配置：一般推荐设置为最大物理内存的四分之三</p> <p>修改 Redis 内存：</p> <ol><li><p>通过修改配置文件</p> <p><a data-fancybox="" title="image-20201029225317253" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/45474b22cfa1488f888e2bd5070ce53b.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/45474b22cfa1488f888e2bd5070ce53b.png" alt="image-20201029225317253"></a></p></li> <li><p>通过命令修改</p> <p>config set maxmemory 1</p></li></ol> <p>Redis 内存满了会怎么样，Redis 内存超出了设置的最大值会怎么样？</p> <p><a data-fancybox="" title="image-20201029230102887" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7b1524e8200342e8857bc469c13fd2c8.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7b1524e8200342e8857bc469c13fd2c8.png" alt="image-20201029230102887"></a></p> <p>在设置了 maxmemory 后，如果 Redis 中的 key 没有设置过期时间，就有可能内存溢出，为了避免出现这种情况，可以使用内存淘汰策略。</p> <h2 id="二、redis-内置的缓存淘汰策略"><a href="#二、redis-内置的缓存淘汰策略" class="header-anchor">#</a> 二、Redis 内置的缓存淘汰策略</h2> <p><a data-fancybox="" title="image-20201029230630069" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/d00f9d079fc542c183171ad09e95ef90.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/d00f9d079fc542c183171ad09e95ef90.png" alt="image-20201029230630069"></a></p> <p>默认使用的策略：</p> <p><a data-fancybox="" title="image-20201029230742415" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7dd6da7c2c8746718dba5d7c23e42b69.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/7dd6da7c2c8746718dba5d7c23e42b69.png" alt="image-20201029230742415"></a></p> <p><a data-fancybox="" title="image-20201029230804853" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/d2680c6809fb4cd984b1fcd047ac3a57.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/d2680c6809fb4cd984b1fcd047ac3a57.png" alt="image-20201029230804853"></a></p> <p>默认情况下，不会自动淘汰内存中的 key，如果内存满了，则直接返回一个错误。</p> <p>往 Redis 中写的数据，是怎么没有的：</p> <p>如果一个 key 过期了，那这个 key 是到期立即删除还是什么时候删除？不是立即删除。</p> <h2 id="三、redis-中删除key的策略："><a href="#三、redis-中删除key的策略：" class="header-anchor">#</a> 三、Redis 中删除key的策略：</h2> <ol><li><p>定时删除（对 Cpu 不友好，拿处理器时间换内存空间）</p> <p>定时删除，10 秒后删除</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">set</span> k1 v1 ex <span class="token number">10</span>
</code></pre></div><p>Redis 不可能时时刻刻遍历所有被设置了生命周期的 key，来检测数据是否已经到达过期时间，然后对 key 进行删除。</p> <p>立即删除能保证内存中数据的新鲜度，因为它保证 key 在过期后立马被删除，key 所占用的内存也会被释放。但是这种操作对 cpu 不友好，因为遍历和删除都会占用 cpu，会造成 cpu 负载过大，会有性能问题。</p></li> <li><p>惰性删除（对内存不友好，拿存储器空间换处理器时间）</p> <p>数据到达过期时间了，不做处理，等下次访问该数据的时候，如果数据未过期，则返回数据；如果数据已经过期，则删除数据，并返回数据不存在。</p> <p>惰性删除的缺点是：对内存不友好，因为过期的数据可能还存放在内存中</p> <p>如果一个 key 已经过期了，过期之后没有被访问，那么这个 key 就不会被删除，key 所占用的内存也不会被释放。如果大量的过期 key 在内存中，并且没有被访问，这种情况可以被看成是内存泄露（大量无用的垃圾数据占用了大量的内存），服务器不会自动去删除这些数据，只有用户通过 flushdb 来删除数据，者对于运行状态非常依赖内存的 Redis 服务器来说，是很不好的。</p></li> <li><p>定期删除（折中，定期抽样 key，判断是否过期）</p> <p>定期删除是定时删除与惰性删除的折中方案。</p> <p>定期删除策略，每隔一段时间执行一次删除过期 key 的操作，并通过限制删除操作执行的时长和频率来减少删除操作对 CPU 时间的影响。</p> <p><a data-fancybox="" title="image-20201029232810745" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/9890554d375549ef8343617a4ee2189c.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/9890554d375549ef8343617a4ee2189c.png" alt="image-20201029232810745"></a></p></li> <li><p>漏洞</p> <ol><li>定期删除时，从来没有被抽查到</li> <li>惰性删除时，过期后，从来没有被访问</li> <li>以上漏洞都会造成大量过期的 key 堆积在内存中，导致 Redis 内存空间紧张或者很快耗尽</li></ol></li></ol> <p>Redis 内存淘汰策略：</p> <ol><li>noeviction：不会驱逐任何 key</li> <li>allkeys-lru（最常用的）：对所有 key 使用 LRU 算法进行删除</li> <li>volattile-lru：对所有设置了过期时间的 key 使用 LRU 算法进行删除</li> <li>allkeys-random：对所有 key 随机删除</li> <li>volatile-random：对所有设置了过期时间的 key 随机删除</li> <li>volatile-ttl：删除马上要过期的 key</li> <li>allkeys-lfu：对所有 key 使用 LFU 算法进行删除</li> <li>volatile-lfu：对所有设置了过期时间的 key 使用 LFU 算法进行删除</li></ol> <p>LRU（Least Recently Used）：最近最少使用</p> <p>LFU（Least Frequently Used）：</p> <p>设置 key 删除策略：</p> <ol><li><p>修改配置文件</p> <p><a data-fancybox="" title="image-20201029235307685" href="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/62d53f85ac6e4cfb83ba264ccf0751ec.png"><img src="http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-10-29/62d53f85ac6e4cfb83ba264ccf0751ec.png" alt="image-20201029235307685"></a></p></li> <li><p>使用命令修改</p> <div class="language-bash extra-class"><pre class="language-bash"><code>config <span class="token builtin class-name">set</span> maxmemory-policy allkeys-lru
config get maxmemory-policy
</code></pre></div></li></ol> <p>LRU 算法：</p> <p>是 Least Recently Used 的缩写，即最近最少使用，是一种常见的页面置换算法，选择最近最久没有使用的数据予以淘汰。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">LRUCache</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>
    <span class="token class-name">DoubleLinkedList</span> doubleLinkedList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LRUCache</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>capacity <span class="token operator">=</span> capacity<span class="token punctuation">;</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        doubleLinkedList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Node</span> node <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        doubleLinkedList<span class="token punctuation">.</span><span class="token function">deleteNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        doubleLinkedList<span class="token punctuation">.</span><span class="token function">addHead</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> node<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Node</span> node <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            doubleLinkedList<span class="token punctuation">.</span><span class="token function">deleteNode</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
            doubleLinkedList<span class="token punctuation">.</span><span class="token function">addHead</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Node</span> lastNode <span class="token operator">=</span> doubleLinkedList<span class="token punctuation">.</span><span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>lastNode<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                doubleLinkedList<span class="token punctuation">.</span><span class="token function">deleteNode</span><span class="token punctuation">(</span>lastNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">Node</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            doubleLinkedList<span class="token punctuation">.</span><span class="token function">addHead</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> key<span class="token punctuation">;</span>
        <span class="token keyword">int</span> value<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> prev<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> next<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">DoubleLinkedList</span> <span class="token punctuation">{</span>
        <span class="token class-name">Node</span> head<span class="token punctuation">;</span>
        <span class="token class-name">Node</span> tail<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">DoubleLinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addHead</span><span class="token punctuation">(</span><span class="token class-name">Node</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>prev <span class="token operator">=</span> head<span class="token punctuation">;</span>
            head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> node<span class="token punctuation">;</span>
            head<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span><span class="token class-name">Node</span> node<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> node<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            node<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Node</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> tail<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/11_分布式锁.html" class="prev">
        分布式锁
      </a></span> <span class="next"><a href="/blog_publish/java/03_ApplicationFramework/03_Middleware/01_Cache/Redis/13_缓存失效带来的问题.html">
        缓存失效带来的问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog_publish/assets/js/app.0b3e5da3.js" defer></script><script src="/blog_publish/assets/js/2.bedb11a8.js" defer></script><script src="/blog_publish/assets/js/159.7856f4d3.js" defer></script>
  </body>
</html>
