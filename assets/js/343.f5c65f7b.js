(window.webpackJsonp=window.webpackJsonp||[]).push([[343],{720:function(a,s,t){"use strict";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"使用yum下载安装包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用yum下载安装包"}},[a._v("#")]),a._v(" 使用yum下载安装包")]),a._v(" "),t("p",[a._v("一、在安装软件的时候，保留安装包")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("修改/etc/yum.conf文件")]),a._v(" "),t("p",[a._v("修改前")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装包的存放路径")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cachedir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/cache/yum/"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$basearch")]),a._v("/"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$releasever")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 0：不保存，1：保存")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("keepcache")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("debuglevel")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logfile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/log/yum.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("exactarch")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("obsoletes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("installonly_limit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bugtracker_url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://bugs.centos.org/set_project.php?project_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ref")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://bugs.centos.org/bug_report_page.php?category"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yum\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("distroverpkg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("centos-release\n")])])]),t("p",[a._v("修改后：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装包的存放路径")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("cachedir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/software/yumPackage\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 0：不保存，1：保存")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("keepcache")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("keepcache")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("debuglevel")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("logfile")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/var/log/yum.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("exactarch")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("obsoletes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("installonly_limit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("bugtracker_url")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://bugs.centos.org/set_project.php?project_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("23")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("ref")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("http://bugs.centos.org/bug_report_page.php?category"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("yum\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("distroverpkg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("centos-release\n")])])])]),a._v(" "),t("li",[t("p",[a._v("从此之后，安装软件的依赖包都会保存下来")]),a._v(" "),t("p",[a._v("软件安装包的具体存储路径是：/opt/software/yumPackage/base/packages/")])])]),a._v(" "),t("p",[a._v("二、仅下载安装包")]),a._v(" "),t("ol",[t("li",[a._v("检查软件包的级联依赖关系"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum deplist gcc\n")])])])]),a._v(" "),t("li",[a._v("使用repotrack下载安装包\n安装工具"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install yum-utils\n")])])]),a._v("下载软件包(全量依赖)"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("repotrack gcc\n")])])])]),a._v(" "),t("li",[a._v("使用yumdownloader下载安装包\n安装工具"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install yum-utils\nyumdownloader --resolve --destdir=/opt/software gcc\n")])])]),a._v("yumdownloader 只会下载主软件包与当前操作系统缺少的依赖")]),a._v(" "),t("li",[a._v("使用yum插件下载安装包\n安装插件"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum -y install yum-download \n")])])]),a._v("下载软件包"),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum install -y gcc --downloadonly --downloaddir=/opt/software \n")])])]),a._v("该方式只会下载主软件包与当前操作系统缺少的依赖")])])])}),[],!1,null,null,null);s.default=r.exports}}]);