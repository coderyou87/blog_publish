(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{615:function(e,n,r){"use strict";r.r(n);var t=r(42),o=Object(t.a)({},(function(){var e=this.$createElement,n=this._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":this.$parent.slotKey}},[n("h1",{attrs:{id:"nginx配置模板"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置模板"}},[this._v("#")]),this._v(" Nginx配置模板")]),this._v(" "),n("div",{staticClass:"language-conf extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[this._v('user root root;\nworker_processes 16;\nworker_rlimit_nofile 102400;\n\n#error_log  logserror.log;\n#pid        work/nginx.pid;\nevents {\n    worker_connections 102400;\n    use epoll;\n    #可以一次建立多个连接\n    multi_accept on;\n}\nhttp {\n    include mime.types;\n    default_type application/octet-stream;\n\n    log_format access_log_format \'$remote_addr - "$request" $status $bytes_sent $request_time\';\n    # access_log logs/access.log access_log_format;\n\n    sendfile on;\n    proxy_connect_timeout 600;\n    proxy_send_timeout 600;\n    proxy_read_timeout 600;\n    send_timeout 600;\n\n    #  #有数据随时发送（只用在应答需要非常快速的情况下）\n    tcp_nodelay off;\n\n    ##当数据包达到一定大小再发送\n    tcp_nopush on;\n    #http连接超时时间\n    keepalive_timeout 300;\n\n    gzip on;\n    gzip_min_length 1024;\n    gzip_buffers 4 16k;\n    gzip_comp_level 4;\n    gzip_proxied any;\n    gzip_types text/plain application/javascript text/css application/xml text/javascript image/jpeg image/gif image/png;\n    gzip_vary on;\n\n    open_file_cache max=204800 inactive=20s;\n    open_file_cache_min_uses 1;\n    open_file_cache_valid 30s;\n    server_tokens off;\n\n\n    #该参数设置是否开启proxy的buffer功能，参数的值为on或者off。\n    #如果这个设置为off，那么proxy_buffers和proxy_busy_buffers_size这两个指令将会失效。\n    #但是无论proxy_buffering是否开启，proxy_buffer_size都是生效的\n    #A—>B->C->B->buffer(temp_file:proxy_temp_path)->足够大->A\n    proxy_buffering off;\n\n    #否传递4xx和5xx错误信息到客户端，或者允许nginx使用error_page处理错误信息\n    fastcgi_intercept_errors on;\n    proxy_intercept_errors on;\n    fastcgi_buffers 16 128k;\n\n    index index.html;\n\n    server {\n        listen 8080;\n        server_name localhost;\n        charset utf-8;\n        error_page 502 503 504 /50x.html;\n        location /cas/ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8085;\n        }\n\n        location /dac/ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8085;\n\n        }\n\n        location = /analystui {\n            ##该指令是实现URL重写\n            rewrite /analystui /analystui/;\n        }\n        location ~* ^/analystui/.*\\.(js|css|png|jpeg|jpg|gif|html|ttf|svg|woff|otf|eot|woff2|ico)$ {\n            #last: 本条规则匹配完成后，继续向下匹配新的location URI 规则\n            #break: 本条规则匹配完成即终止，不再匹配后面的任何规则(不常用)。\n            #redirect: 返回302临时重定向，浏览器地址会显示跳转新的URL地址\n            #permanent: 返回301永久重定向。浏览器地址会显示跳转新的URL地址\n            rewrite ^/analystui/(.*) /analystuistatic/$1 last;\n        }\n        location /analystuistatic/ {\n            alias /home/sdc/UE305_NEW/webroot/analystui/approot/;\n            error_page 405 =200 $uri;\n            expires 30d;\n        }\n        location /analystui/ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8083;\n        }\n        location ~ ^/analystrunner/.*/userfile\\.jsp$ {\n            if ($args ~* "projectId=(.*)&pageId=(.*)&fileId=(.*)&projectName=(.*)$") {\n                set $projectId $1;\n                set $pageId $2;\n                set $fileId $3;\n                rewrite ^/analystrunner/(.*) /analystrunnerimg/$projectId/$pageId/$fileId last;\n            }\n        }\n        location /analystrunnerimg/ {\n            alias /home/sdc/UE305_NEW/uefiles/upload/;\n            error_page 405 =200 $uri;\n            expires 30d;\n        }\n        location ~ ^/analystrunner/!.*$ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8084;\n        }\n        location ~ ^/analystrunner/.*/settings\\.js$ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8084;\n        }\n\n        location ~* ^/analystrunner/.*\\.(js|css|png|jpeg|jpg|gif|html|ttf|svg|woff|otf|eot|woff2|ico)$ {\n            rewrite ^/analystrunner/(.*) /analystrunnerstatic/$1 last;\n        }\n        location /analystrunnerstatic/ {\n            alias /home/sdc/UE305_NEW/webroot/analystrunner/approot/;\n            expires 30d;\n        }\n        location /analystrunner/ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8084;\n        }\n\n        location /arcgis/ {\n            alias /home/sdc/UE305_NEW/webroot/arcgis/approot/;\n        }\n        location /images/ {\n            alias /home/sdc/UE305_NEW/webroot/images/;\n        }\n        location ^~ /gims/ {\n            proxy_set_header Host $proxy_host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $remote_addr;\n            proxy_pass http://127.0.0.1:8083;\n        }\n    }\n}\n')])])])])}),[],!1,null,null,null);n.default=o.exports}}]);