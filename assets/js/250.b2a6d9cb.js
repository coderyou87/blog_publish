(window.webpackJsonp=window.webpackJsonp||[]).push([[250],{673:function(a,e,t){"use strict";t.r(e);var s=t(42),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"k8s错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#k8s错误"}},[a._v("#")]),a._v(" K8S错误")]),a._v(" "),t("h2",{attrs:{id:"一、error-writing-crisocket-information-for-the-control-plane-node"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、error-writing-crisocket-information-for-the-control-plane-node"}},[a._v("#")]),a._v(" 一、Error writing Crisocket information for the control-plane node")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("error execution phase upload-config/kubelet: Error writing Crisocket information for the control-plane node: timed out waiting for the condition\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("swapoff -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" kubeadm reset  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" systemctl daemon-reload "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" systemctl restart kubelet  "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" iptables -F "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" iptables -t nat -F "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" iptables -t mangle -F "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" iptables -X\n")])])]),t("h2",{attrs:{id:"二、please-drain-this-node-and-delete-the-cpu-manager-checkpoint-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、please-drain-this-node-and-delete-the-cpu-manager-checkpoint-file"}},[a._v("#")]),a._v(" 二、Please drain this node and delete the CPU manager checkpoint file")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(' kubelet: Please drain this node and delete the CPU manager checkpoint file "/var/lib/kubelet/cpu_manager_state" before restarting Kubelet\n')])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf  /var/lib/kubelet/cpu_manager_state\n")])])]),t("h2",{attrs:{id:"三、the-connection-to-the-server-localhost-8080-was-refused"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、the-connection-to-the-server-localhost-8080-was-refused"}},[a._v("#")]),a._v(" 三、The connection to the server localhost:8080 was refused")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl get node\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("The connection to the server localhost:8080 was refused - did you specify the right host or port?\n")])])]),t("p",[a._v("编辑 /etc/profile文件，追加以下内容")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("KUBECONFIG")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/etc/kubernetes/admin.conf\n")])])]),t("p",[a._v("刷新配置文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" /etc/profile\n")])])]),t("h2",{attrs:{id:"四、flannel安装失败，一直显示init-imagepullbackoff"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、flannel安装失败，一直显示init-imagepullbackoff"}},[a._v("#")]),a._v(" 四、flannel安装失败，一直显示Init:ImagePullBackOff")]),a._v(" "),t("p",[a._v("flannel安装失败，一直显示Init:ImagePullBackOff")]),a._v(" "),t("p",[a._v("在github下载docker镜像，地址：https://github.com/coreos/flannel/releases")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget https://g.ioiox.com/https://github.com/coreos/flannel/releases/download/v0.13.0/flanneld-v0.13.0-amd64.docker\n")])])]),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20201115231600261",href:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/15ecf27e3ed64f2b8c70190650779477.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/15ecf27e3ed64f2b8c70190650779477.png",alt:"image-20201115231600261"}})])]),a._v(" "),t("p",[a._v("将镜像导入docker中")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker load "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" flanneld-v0.13.0-amd64.docker\n")])])]),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20201115231959659",href:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/bfaa68cae5984af68d1354d8bd1fa4b0.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/bfaa68cae5984af68d1354d8bd1fa4b0.png",alt:"image-20201115231959659"}})])]),a._v(" "),t("p",[a._v("修改文件kube-flannel.yml，修改之前先备份")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" kube-flannel.yml kube-flannel.yml_back\n")])])]),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20201115231931696",href:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/d5d74706d5b84b638575da3f7910ac61.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-11-15/d5d74706d5b84b638575da3f7910ac61.png",alt:"image-20201115231931696"}})])]),a._v(" "),t("p",[a._v("再次加载文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl apply -f kube-flannel.yml\n")])])]),t("p",[a._v("查询节点状态")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("kubectl get pod -n kube-system\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);