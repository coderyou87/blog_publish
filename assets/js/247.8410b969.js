(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{653:function(t,v,_){"use strict";_.r(v);var r=_(42),e=Object(r.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"dockerfile"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[t._v("#")]),t._v(" DockerFile")]),t._v(" "),_("p",[t._v("DockerFile由一行行命令语句组成，并且支持以#开头的注释")]),t._v(" "),_("p",[t._v("DockerFile一般被分为四个部分："),_("strong",[t._v("基础镜像信息、维护者信息、镜像操作指令、启动时执行指令")])]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("指令")]),t._v(" "),_("th",[t._v("说明")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("FROM")]),t._v(" "),_("td",[t._v("指定基础镜像")])]),t._v(" "),_("tr",[_("td",[t._v("MAINTAINER")]),t._v(" "),_("td",[t._v("执行维护者信息，已经过时，可以使用LABEL maintainer=XXX 来替代")])]),t._v(" "),_("tr",[_("td",[t._v("RUN")]),t._v(" "),_("td",[t._v("运行命令")])]),t._v(" "),_("tr",[_("td",[t._v("CMD")]),t._v(" "),_("td",[t._v("指定启动容器时默认的命令")])]),t._v(" "),_("tr",[_("td",[t._v("ENTRYPOINT")]),t._v(" "),_("td",[t._v("指定镜像的默认入口，运行命令")])]),t._v(" "),_("tr",[_("td",[t._v("EXPOSE")]),t._v(" "),_("td",[t._v("声明镜像内服务器监听的端口")])]),t._v(" "),_("tr",[_("td",[t._v("ENV")]),t._v(" "),_("td",[t._v("指定环境变量，会被固化到镜像的config中，可以在 docker run的时候，使用 -e 修改")])]),t._v(" "),_("tr",[_("td",[t._v("ADD")]),t._v(" "),_("td",[t._v("复制指定的 src 路径下的内容到容器中的 dest 路径下，src可以为url路径，可以为tar文件，能自动解压")])]),t._v(" "),_("tr",[_("td",[t._v("COPY")]),t._v(" "),_("td",[t._v("复制宿主机的 src 路径下的内容到镜像中的 dest 路径下，如果是tar包，不会自动解压")])]),t._v(" "),_("tr",[_("td",[t._v("LABEL")]),t._v(" "),_("td",[t._v("执行生成镜像的元数据标签信息")])]),t._v(" "),_("tr",[_("td",[t._v("VOLUMN")]),t._v(" "),_("td",[t._v("创建数据卷挂载点")])]),t._v(" "),_("tr",[_("td",[t._v("USER")]),t._v(" "),_("td",[t._v("指定运行容器时的用户名或UID")])]),t._v(" "),_("tr",[_("td",[t._v("WORKDIR")]),t._v(" "),_("td",[t._v("配置工作目录，为后续的 RUN、CMD、ENTRYPOINT 指令配置工作目录")])]),t._v(" "),_("tr",[_("td",[t._v("ARG")]),t._v(" "),_("td",[t._v("指定镜像内使用的参数（版本号等），可以在 build 的时候，使用 –build-args 修改")])]),t._v(" "),_("tr",[_("td",[t._v("ONBUILD")]),t._v(" "),_("td",[t._v("配置当创建的镜像作为其他镜像的基础镜像时，所指定的创建操作指令")])]),t._v(" "),_("tr",[_("td",[t._v("STOPSIGNAL")]),t._v(" "),_("td",[t._v("容器退出的信号值")])]),t._v(" "),_("tr",[_("td",[t._v("HEALTHCHECK")]),t._v(" "),_("td",[t._v("健康检查")])]),t._v(" "),_("tr",[_("td",[t._v("SHELL")]),t._v(" "),_("td",[t._v("指定使用 shell 时的默认 shell 类型")])])])]),t._v(" "),_("h2",{attrs:{id:"一、from"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、from"}},[t._v("#")]),t._v(" 一、FROM")]),t._v(" "),_("p",[t._v("FROM 指定基础镜像，在选择基础镜像时，可以选一些比较纯净的镜像（apline，slim）")]),t._v(" "),_("p",[t._v("scratch镜像是一个空镜像，常用于多阶段构建")]),t._v(" "),_("h2",{attrs:{id:"二、label"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#二、label"}},[t._v("#")]),t._v(" 二、LABEL")]),t._v(" "),_("p",[t._v("标注镜像的说明信息")]),t._v(" "),_("div",{staticClass:"language-dockerfile extra-class"},[_("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LABEL")]),t._v(" multi.label1="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value1"')]),t._v(" multi.label2="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value2"')]),t._v(" other="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value3"')]),t._v(" \n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("LABEL")]),t._v(" multi.label1="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value1"')]),t._v(" \\ \n\t  multi.label2="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value2"')]),t._v(" \\ \n\t  other="),_("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value3"')]),t._v("\n")])])]),_("h2",{attrs:{id:"三、run"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三、run"}},[t._v("#")]),t._v(" 三、RUN")]),t._v(" "),_("ul",[_("li",[t._v("RUN 指令在当前镜像层顶部的新层执行命令，并提交结果，生成新的镜像层")]),t._v(" "),_("li",[t._v("生成的提交镜像将用于DockerFile中的下一步运行，分层运行RUN指令并提交，符合docker的核心概念。")]),t._v(" "),_("li",[t._v("exec 形式可以避免破坏shell字符串，并使用不包含执行shell可执行文件的基本镜像运行RUN命令。可以使用SHELL命令更改shell形式的默认shell。在shell形式中，可以使用 \\ (反斜杠) 将一条RUN指令继续到下一行")]),t._v(" "),_("li")])])}),[],!1,null,null,null);v.default=e.exports}}]);