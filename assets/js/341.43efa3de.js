(window.webpackJsonp=window.webpackJsonp||[]).push([[341],{567:function(s,a,t){"use strict";t.r(a);var e=t(42),l=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"在同一台linux中安装多个mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在同一台linux中安装多个mysql"}},[s._v("#")]),s._v(" 在同一台Linux中安装多个mysql")]),s._v(" "),t("h2",{attrs:{id:"一、安装第一台mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装第一台mysql"}},[s._v("#")]),s._v(" 一、安装第一台MySQL")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("上传mysql安装包到/opt/software目录下")])]),s._v(" "),t("li",[t("p",[s._v("创建mysql用户组与用户")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -g mysql mysql\n")])])])]),s._v(" "),t("li",[t("p",[s._v("解压mysql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf /opt/software/mysqlXXX -C /opt/module/\n")])])])]),s._v(" "),t("li",[t("p",[s._v("初始化mysql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/opt/module/mysqlXXX/bin/mysqld --initialize-insecure --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysqlXXX --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysqlXXX/data\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装mysql加密连接")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/opt/module/mysqlXXX/bin/mysql_ssl_rsa_setup --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysqlXXX/data\n")])])])]),s._v(" "),t("li",[t("p",[s._v("创建配置文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/module/mysqlXXX/tmp\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /opt/module/mysqlXXX/conf\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /opt/module/mysqlXXX/conf/my.cnf\n")])])]),t("p",[s._v("编辑/opt/module/mysqlXXX/conf/my.cnf")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("[client]\nport = 3306\ndefault-character-set=utf8\nsocket=/opt/module/mysqlXXX/tmp/mysql.sock\n[mysqld]\n# 一般配置选项\nbasedir = /usr/local/mysql\ndatadir = /usr/local/mysql/data\nport = 3306\ncharacter-set-server=utf8\ndefault_storage_engine=InnoDB\nsql_mode=STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\nsocket=/opt/module/mysqlXXX/tmp/mysql.sock\npid-file=/opt/module/mysqlXXX/tmp/mysqld.pid\n")])])])]),s._v(" "),t("li",[t("p",[s._v("启动mysql服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/opt/module/mysqlXXX/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysqlXXX/conf/my.cnf --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n")])])])]),s._v(" "),t("li",[t("p",[s._v("启动mysql客户端")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/opt/module/mysqlXXX/bin/mysql --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysqlXXX/conf/my.cnf -u root -p\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/opt/module/mysqlXXX/bin/mysql -S /opt/module/mysqlXXX/tmp/mysql.sock -u root -p\n")])])])]),s._v(" "),t("li",[t("p",[s._v("修改初始化密码")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"New Password"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("授权远程访问")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("grant all privileges on *.* to "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified by "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Your Password'")]),s._v(" with grant option"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("p",[s._v("刷新权限")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("flush privileges"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("开放端口")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("firewall-cmd --zone"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("XXXX/tcp --permanent\nfirewall-cmd --reload\n")])])])]),s._v(" "),t("li",[t("p",[s._v("编写服务启动脚本")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/local/sbin/start_mysql_1\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n/opt/module/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/opt/module/mysql/conf/my.cnf --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /usr/local/sbin/start_mysql_1\n")])])])]),s._v(" "),t("li",[t("p",[s._v("停止mysql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pkill")]),s._v(" mysql\n")])])])])]),s._v(" "),t("h2",{attrs:{id:"二、安装第二台mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、安装第二台mysql"}},[s._v("#")]),s._v(" 二、安装第二台mysql")]),s._v(" "),t("p",[s._v("重复上述步骤")])])}),[],!1,null,null,null);a.default=l.exports}}]);