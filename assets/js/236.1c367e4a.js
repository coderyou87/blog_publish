(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{484:function(a,s,t){"use strict";t.r(s);var e=t(42),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"docker-常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[a._v("#")]),a._v(" Docker 常用命令")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/docker/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker命令手册"),t("OutboundLink")],1)]),a._v(" "),t("h2",{attrs:{id:"一、帮助命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、帮助命令"}},[a._v("#")]),a._v(" 一、帮助命令")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("查看 docker 版本")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker version\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看 docker 信息")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker info\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看 docker 帮助信息")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker --help\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"二、镜像命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、镜像命令"}},[a._v("#")]),a._v(" 二、镜像命令")]),a._v(" "),t("h3",{attrs:{id:"_2-1-查看-docker-镜像信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-查看-docker-镜像信息"}},[a._v("#")]),a._v(" 2.1 查看 docker 镜像信息")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("列出本地主机上的镜像信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images\n")])])])]),a._v(" "),t("li",[t("p",[a._v("列出本地主机上所有的镜像信息(含中间映像层)")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images -a\n")])])])]),a._v(" "),t("li",[t("p",[a._v("只显示镜像 Id")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images -q\n")])])])]),a._v(" "),t("li",[t("p",[a._v("显示镜像的摘要信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images --digests\n")])])])]),a._v(" "),t("li",[t("p",[a._v("显示完整的镜像信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker images --no-trunc\n")])])])]),a._v(" "),t("li",[t("p",[a._v("查看镜像详情")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker inspect imageId\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"_2-2-搜索镜像信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-搜索镜像信息"}},[a._v("#")]),a._v(" 2.2 搜索镜像信息")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://hub.docker.com",target:"_blank",rel:"noopener noreferrer"}},[a._v("官网地址"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("检索镜像信息:")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker search "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" redis\n")])])]),t("p",[a._v("显示完整的镜像信息")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker search --no-trunc redis\n")])])]),t("p",[a._v("使用 filter 添加查询条件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# stars大于100的redis镜像")]),a._v("\ndocker search --filter "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("stars")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),a._v(" redis\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 列出自动构建的镜像信息")]),a._v("\ndocker search --filter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"is-automated=true"')]),a._v(" redis\ndocker search --filter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"is-automated=true"')]),a._v(" --filter "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"stars=100"')]),a._v(" redis\n")])])]),t("h3",{attrs:{id:"_2-3-拉取镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-拉取镜像"}},[a._v("#")]),a._v(" 2.3 拉取镜像")]),a._v(" "),t("p",[a._v("如果不写 Tag,默认为 latest")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker pull redis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-4-删除镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-删除镜像"}},[a._v("#")]),a._v(" 2.4 删除镜像")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("删除单个镜像")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker rmi imageId\n")])])])]),a._v(" "),t("li",[t("p",[a._v("强制删除镜像")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker rmi -f imageId\n")])])])]),a._v(" "),t("li",[t("p",[a._v("删除多个镜像")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker rmi -f imageNmae1:TAG1 imageName2:TAG2\n")])])])]),a._v(" "),t("li",[t("p",[a._v("删除全部镜像")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker rmi -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${docker images -qa}")]),a._v("\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"_2-5-根据当前容器创建一个新镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-根据当前容器创建一个新镜像"}},[a._v("#")]),a._v(" 2.5  根据当前容器创建一个新镜像")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]\n")])])]),t("p",[a._v("参数：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-a, --author string    Author "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("e.g., "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"John Hannibal Smith <hannibal@a-team.com>"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n-c, --change list      Apply Dockerfile instruction to the created image\n-m, --message string   Commit message\n-p, --pause            Pause container during commit "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("default "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker commit -a author_xiaoyou -m "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"first commit "')]),a._v(" myNginx my_nginx:v1\n")])])]),t("p",[a._v("如果上面的提交命令执行了两次（提交时的镜像名称相同），之前提交的镜像就会变成游离镜像（不能被使用）")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-10/2738871cc1254e9187d895b5107ab02b.png",alt:"image-20210410010308446"}})]),a._v(" "),t("p",[t("strong",[a._v("移除游离镜像")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker image prune\n")])])]),t("h3",{attrs:{id:"_2-7-将镜像推送到远程仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-将镜像推送到远程仓库"}},[a._v("#")]),a._v(" 2.7 将镜像推送到远程仓库")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("登陆")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker login --username"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("六月徂暑 registry.cn-beijing.aliyuncs.com\n")])])]),t("p",[a._v("回车，输入密码")]),a._v(" "),t("p",[a._v("登陆成功后，会将认证信息保存在"),t("code",[a._v("/root/.docker/config.json")]),a._v("文件中")])]),a._v(" "),t("li",[t("p",[a._v("修改tag")]),a._v(" "),t("p",[a._v("替换ImageId个ImageVersion")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker tag ImageId registry.cn-beijing.aliyuncs.com/xiaoyou_namespace/mynginx:ImageVersion\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker tag 688e73f7e34c registry.cn-beijing.aliyuncs.com/xiaoyou_namespace/mynginx:v2\n")])])])]),a._v(" "),t("li",[t("p",[a._v("推送")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker push registry.cn-beijing.aliyuncs.com/xiaoyou_namespace/mynginx:ImageVersion\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker push registry.cn-beijing.aliyuncs.com/xiaoyou_namespace/mynginx:v2\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"_2-8-导入导出镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-导入导出镜像"}},[a._v("#")]),a._v(" 2.8 导入导出镜像")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("导出")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker save "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("IMAGE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-o, --output string   Write to a file, instead of STDOUT\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker save -o /opt/software/redis-save.tar redis:latest\n")])])])]),a._v(" "),t("li",[t("p",[a._v("导入")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker load "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-i, --input string   Read from "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" archive file, instead of STDIN\n-q, --quiet          Suppress the load output\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker load -i /opt/software/redis-save.tar\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"三、容器命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、容器命令"}},[a._v("#")]),a._v(" 三、容器命令")]),a._v(" "),t("p",[a._v("容器的状态：")]),a._v(" "),t("ul",[t("li",[a._v("Created（创建），使用"),t("code",[a._v("docker create")]),a._v("命令创建容器后的状态")]),a._v(" "),t("li",[a._v("Up（运行中），使用"),t("code",[a._v("docker start")]),a._v("或"),t("code",[a._v("docker run")]),a._v("命令运行容器后的状态")]),a._v(" "),t("li",[a._v("Pause（暂停），使用"),t("code",[a._v("docker pause")]),a._v("命令暂停容器后的状态")]),a._v(" "),t("li",[a._v("Exited（退出），使用"),t("code",[a._v("docker stop")]),a._v("或"),t("code",[a._v("docker kill")]),a._v("命令停止容器后的状态")])]),a._v(" "),t("h3",{attrs:{id:"_3-1-启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-启动容器"}},[a._v("#")]),a._v(" 3.1 启动容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Command"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ndocker run --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("testdocker -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("（宿主机端口）:7878（容器端口） docker/testdocker\n")])])]),t("p",[a._v("第一个端口是宿主机的端口，必须唯一；第二个是容器的端口，不同容器可以重复")]),a._v(" "),t("p",[a._v("宿主机的多个端口可以绑定到容器的一个端口，但是不允许用宿主机的一个端口去绑定容器中的多个端口")]),a._v(" "),t("p",[t("code",[a._v("docker run")]),a._v(" 默认是前台启动")]),a._v(" "),t("p",[t("code",[a._v("docker run -d")]),a._v(" 等价于 "),t("code",[a._v("docker create")]),a._v(" + "),t("code",[a._v("docker start")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name")]),a._v(": 指定容器运行时的名称")]),a._v(" "),t("li",[t("code",[a._v("-d")]),a._v(": 后台运行,并返回容器 Id")]),a._v(" "),t("li",[t("code",[a._v("-p")]),a._v(": 指定端口映射")]),a._v(" "),t("li",[t("code",[a._v("-P")]),a._v(": 随机端口映射")]),a._v(" "),t("li",[t("code",[a._v("-i")]),a._v(": 以交互式运行容器")]),a._v(" "),t("li",[t("code",[a._v("-t")]),a._v(": 为容器分配一个伪终端")])]),a._v(" "),t("p",[a._v("在运行容器的时候，指定网络模式")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("我们在使用docker run创建Docker容器时，可以用--net选项指定容器的网络模式，Docker有以下4种网络模式：\nhost模式，使用--net=host指定。\ncontainer模式，使用--net=container:NAME_or_ID指定。\nnone模式，使用--net=none指定。\nbridge模式，使用--net=bridge指定，默认设置。\n \n默认选择bridge。\n")])])]),t("h3",{attrs:{id:"_3-2-创建容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-创建容器"}},[a._v("#")]),a._v(" 3.2 创建容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker create "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" IMAGE "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("COMMAND"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("ARG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\ndocker create --name myRedis -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6379")]),a._v(":6379 redis:latest\n")])])]),t("p",[t("code",[a._v("docker create")]),a._v("只能创建容器，不能启动容器")]),a._v(" "),t("p",[a._v("在创建完成后，需要使用以下命令启动容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker start containerName\ndocker start containerId\n")])])]),t("h3",{attrs:{id:"_3-3-查看当前运行的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-查看当前运行的容器"}},[a._v("#")]),a._v(" 3.3 查看当前运行的容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("Options"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("ul",[t("li",[t("code",[a._v("-a")]),a._v(": 列出当前所在运行的容器以及历史上运行过的容器")]),a._v(" "),t("li",[t("code",[a._v("-l")]),a._v(": 显示最近创建的容器")]),a._v(" "),t("li",[a._v("-n: 显示最近创建的 N 个容器")]),a._v(" "),t("li",[a._v("-q: 只显示容器编号")]),a._v(" "),t("li",[a._v("--no-trunc: 不截断输出")])]),a._v(" "),t("h3",{attrs:{id:"_3-4-退出容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-退出容器"}},[a._v("#")]),a._v(" 3.4 退出容器")]),a._v(" "),t("p",[a._v("停止容器并退出")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("exit\n")])])]),t("p",[a._v("不停止容器退出")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ctrl + P + Q\n")])])]),t("h3",{attrs:{id:"_3-5-启动容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-启动容器"}},[a._v("#")]),a._v(" 3.5 启动容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker start 容器名字或Id\n")])])]),t("h3",{attrs:{id:"_3-6-重启容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-重启容器"}},[a._v("#")]),a._v(" 3.6 重启容器")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("docker restart 容器名字或ID\n")])])]),t("h3",{attrs:{id:"_3-7-停止容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-停止容器"}},[a._v("#")]),a._v(" 3.7 停止容器")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("优雅停机（处理完任务才停机）")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker stop 容器名字或Id\n")])])])]),a._v(" "),t("li",[t("p",[a._v("强制停止容器")]),a._v(" "),t("p",[a._v("强制停机（直接拔电源）")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" 容器名字或ID\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"_3-8-删除已停止的容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-删除已停止的容器"}},[a._v("#")]),a._v(" 3.8 删除已停止的容器")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("删除一个容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" 容器Id\n")])])])]),a._v(" "),t("li",[t("p",[a._v("删除多个容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${docker ps -a -q}")]),a._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" -a -q "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("xargs")]),a._v(" docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v("\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"_3-9-暂停容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-暂停容器"}},[a._v("#")]),a._v(" 3.9 暂停容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker pause 容器名字或ID\n")])])]),t("h3",{attrs:{id:"_3-10-恢复容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-恢复容器"}},[a._v("#")]),a._v(" 3.10 恢复容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker unpause 容器名字或ID\n")])])]),t("h3",{attrs:{id:"_3-11-检查容器里面文件系统的更改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-11-检查容器里面文件系统的更改"}},[a._v("#")]),a._v(" 3.11 检查容器里面文件系统的更改")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("diff")]),a._v(" 容器名字或ID\n")])])]),t("p",[a._v("检查结果：")]),a._v(" "),t("ul",[t("li",[a._v("A：添加文件或目录")]),a._v(" "),t("li",[a._v("D：删除文件或目录")]),a._v(" "),t("li",[a._v("C：更改文件或目录")])]),a._v(" "),t("h3",{attrs:{id:"_3-12-导入导出容器（export、import）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-12-导入导出容器（export、import）"}},[a._v("#")]),a._v(" 3.12 导入导出容器（export、import）")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("导")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINER\n")])])]),t("p",[a._v("参数")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-o, --output string   Write to a file, instead of STDOUT\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" -o /opt/software/nginx-export.tar myNginx\n")])])])]),a._v(" "),t("li",[t("p",[a._v("导入")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("import")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("URL"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("- "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("REPOSITORY"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":TAG"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("-c, --change list       Apply Dockerfile instruction to the created image\n-m, --message string    Set commit message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" imported image\n\t--platform string   Set platform "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" server is multi-platform capable\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("import")]),a._v(" /opt/software/nginx-export.tar my_nginx:v3\n")])])]),t("p",[a._v("以这种方式导入的镜像，不能直接运行：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run -d -P --name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("myNginxV3 my_nginx:v3\n")])])]),t("p",[a._v("会出现以下错误：")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-10/d570433544714c6c852762951d531d79.png",alt:"image-20210410013040846"}})]),a._v(" "),t("p",[a._v("需要先找到源容器的启动命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker inspect myNginx\n")])])]),t("p",[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-10/3d5ba35900e64eb286efbef9218ffd7d.png",alt:"image-20210410013406962"}})]),a._v(" "),t("p",[a._v("或者执行以下命令找运行命令：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" --no-trunc\n")])])]),t("p",[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2021-04-10/60fb59ec5ddf40b08f6a0abff88dfc88.png",alt:"image-20210410013540737"}})]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token string"}},[a._v("\"/docker-entrypoint.sh nginx -g 'daemon off;'\"")]),a._v("\n")])])]),t("p",[a._v("导入容器的最终启动命令为：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run -d -P my_nginx:v3 /docker-entrypoint.sh nginx -g "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'daemon off;'")]),a._v("\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"四、其他重要命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、其他重要命令"}},[a._v("#")]),a._v(" 四、其他重要命令")]),a._v(" "),t("h3",{attrs:{id:"_4-1-启动守护式容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-启动守护式容器"}},[a._v("#")]),a._v(" 4.1 启动守护式容器")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker run -d imageName\n")])])]),t("h3",{attrs:{id:"_4-2-查看容器日志"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-查看容器日志"}},[a._v("#")]),a._v(" 4.2 查看容器日志")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker logs -f -t -tail 容器Id\n")])])]),t("ul",[t("li",[a._v("-t：加入时间戳")]),a._v(" "),t("li",[a._v("-f：跟随最新的日志答打印")]),a._v(" "),t("li",[a._v("-tail n：显示最后 n 行")])]),a._v(" "),t("h3",{attrs:{id:"_4-3-查看容器内运行的进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-查看容器内运行的进程"}},[a._v("#")]),a._v(" 4.3 查看容器内运行的进程")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" 容器Id\n")])])]),t("h3",{attrs:{id:"_4-4-查看容器内运行的细节"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-查看容器内运行的细节"}},[a._v("#")]),a._v(" 4.4 查看容器内运行的细节")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker inspect 容器Id\n")])])]),t("h3",{attrs:{id:"_4-5-进入正在运行的容器并以命令行交互"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-进入正在运行的容器并以命令行交互"}},[a._v("#")]),a._v(" 4.5 进入正在运行的容器并以命令行交互")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it 容器Id bashShell\ndocker attach 容器Id\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 以特权（root）进入容器")]),a._v("\ndocker "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it -u "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(":0 --privileged myNginx /bin/bash\n")])])]),t("p",[t("code",[a._v("exec")]),a._v("：在容器中打开新的终端，并且可以启动新的进程")]),a._v(" "),t("p",[t("code",[a._v("attach")]),a._v("：直接进入容器启动命令的终端，不会启动新的进程")]),a._v(" "),t("h3",{attrs:{id:"_4-6-在容器与主机之间拷贝文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-在容器与主机之间拷贝文件"}},[a._v("#")]),a._v(" 4.6  在容器与主机之间拷贝文件")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" CONTAINER:SRC_PATH DEST_PATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("-\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTIONS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" SRC_PATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("- CONTAINER:DEST_PATH\n")])])]),t("ol",[t("li",[t("p",[a._v("将容器中的文件，拷贝到宿主机")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" 容器Id：容器内路径 目的主机路径\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" 9ecd69dead67:/etc/yum.repos.d/docker_repos   ./\n")])])])]),a._v(" "),t("li",[t("p",[a._v("将宿主机的文件，拷贝到容器中")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("docker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v("  目的主机路径  容器Id：容器内路径\ndocker "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" ./nginx.tar.gz   9ecd69dead67:/opt\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"五、常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、常用命令"}},[a._v("#")]),a._v(" 五、常用命令")]),a._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20200621235918642",href:"https://blog-1301073803.cos.ap-chengdu.myqcloud.com/typora/2020-06-21/23-59-20-78247234_image-20200621235918642.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-07-12/9b62ef973ecb471484cc178847600792.png",alt:"image-20200621235918642"}})])]),a._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20200622000003073",href:"https://blog-1301073803.cos.ap-chengdu.myqcloud.com/typora/2020-06-21/23-59-36-8270afc2_clip_image002.jpg"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-07-12/a4c9659249cf49b684a65b6c8206350f.jpg",alt:"image-20200622000003073"}})])]),a._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20200622000003072",href:"https://blog-1301073803.cos.ap-chengdu.myqcloud.com/typora/2020-06-22/00-00-04-dae40145_image-20200622000003072.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-07-12/9040d33b569e447182843a2d9ddd59b5.png",alt:"image-20200622000003072"}})])]),a._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20200622000009945",href:"https://blog-1301073803.cos.ap-chengdu.myqcloud.com/typora/2020-06-22/00-00-17-413f5ed5_image-20200622000009945.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-07-12/37b05b6d57d14c7285273ab58c2994bd.png",alt:"image-20200622000009945"}})])]),a._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"image-20200622000013782",href:"https://blog-1301073803.cos.ap-chengdu.myqcloud.com/typora/2020-06-22/00-00-16-f2dceacb_image-20200622000013782.png"}},[t("img",{attrs:{src:"http://you-blog.oss-accelerate.aliyuncs.com/typora/2020-07-12/6b9e4581407243c38b7a3c99c60d65ac.png",alt:"image-20200622000013782"}})])])])}),[],!1,null,null,null);s.default=r.exports}}]);